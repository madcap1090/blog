<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"  lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1"/>

<title>members of the chamber of representatives of Belgium, 55th legistlature | bad to the code</title>

<meta property='og:title' content='members of the chamber of representatives of Belgium, 55th legistlature - bad to the code'>
<meta property='og:description' content='On 20/06/2019 the new chamber of representative was constituted for the 55th legislature. There are a fair number of new members in this assembly. In this post we will get their Twitter handles if they have one. This will make it possible to get their tweets and information about their accounts to be used in various analyses.
The process can get a tiny bit tedious because as far as I know there is no website regrouping the handles, we need to search for them using the rtweet package, roughly in the same way in which it was done for the last legislature.'>
<meta property='og:url' content='/post/members-of-the-chamber-of-representatives-of-belgium-55th-legistlature/'>
<meta property='og:site_name' content='bad to the code'>
<meta property='og:type' content='article'><meta property='og:image' content='https://www.gravatar.com/avatar/5f460ebf37e30791f47bb5be3de73e3a?s=256'><meta property='article:author' content='https://facebook.com/OClassicoOficial/videos/391802167961744/'><meta property='article:section' content='Post'><meta property='article:tag' content='scraping'><meta property='article:tag' content='Belgian politics'><meta property='article:tag' content='Twitter'><meta property='article:published_time' content='2019-07-16T00:00:00Z'/><meta property='article:modified_time' content='2019-07-16T00:00:00Z'/><meta name='twitter:card' content='summary'><meta name='twitter:site' content='@WilliamBourgeoi'><meta name='twitter:creator' content='@WilliamBourgeoi'>


<link href="/index.xml" rel="alternate" type="application/rss+xml" title="bad to the code" />

<link rel="stylesheet" href="/css/style.css"/><link rel='stylesheet' href='/css/custom.css'><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/site.webmanifest">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" content="#ffffff">
</head>
<body>
<section class="section">
  <div class="container">
    <nav class="nav">
      <div class="nav-left">
        <a class="nav-item" href="/">
          <h1 class="title is-4">bad to the code</h1>
        </a>
      </div>
      <div class="nav-right">
        <nav class="nav-item level is-mobile"><a class="level-item" aria-label="facebook" href='https://facebook.com/OClassicoOficial/videos/391802167961744/'
            target='_blank' rel='noopener'>
            <span class="icon">
              <i class><svg viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
    
    <path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"/>
    
  </svg></i>
            </span>
          </a><a class="level-item" aria-label="email" href='mailto:madcap1090@gmail.com'
            target='_blank' rel='noopener'>
            <span class="icon">
              <i class><svg viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
    
    <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>
    <polyline points="22,6 12,13 2,6"/>
    
  </svg></i>
            </span>
          </a><a class="level-item" aria-label="linkedin" href='https://linkedin.com/in/williambourgeois'
            target='_blank' rel='noopener'>
            <span class="icon">
              <i class><svg viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
    
    <path stroke-width="1.8" d="m5.839218,4.101561c0,1.211972 -0.974141,2.194011 -2.176459,2.194011s-2.176459,-0.982039 -2.176459,-2.194011c0,-1.211094 0.974141,-2.194011 2.176459,-2.194011s2.176459,0.982917 2.176459,2.194011zm0.017552,3.94922l-4.388022,0l0,14.04167l4.388022,0l0,-14.04167zm7.005038,0l-4.359939,0l0,14.04167l4.360816,0l0,-7.370999c0,-4.098413 5.291077,-4.433657 5.291077,0l0,7.370999l4.377491,0l0,-8.89101c0,-6.915523 -7.829986,-6.66365 -9.669445,-3.259423l0,-1.891237z"/>
    
  </svg></i>
            </span>
          </a><a class="level-item" aria-label="twitter" href='https://twitter.com/WilliamBourgeoi'
            target='_blank' rel='noopener'>
            <span class="icon">
              <i class><svg viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
    
    <path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"/>
    
  </svg></i>
            </span>
          </a><a class="level-item" aria-label="github" href='https://github.com/madcap1090'
            target='_blank' rel='noopener'>
            <span class="icon">
              <i class><svg viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
    
    <path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"/>
    
  </svg></i>
            </span>
          </a></nav>
      </div>
    </nav>

    <nav class="nav">
      

      
    </nav>

  </div>
</section>
<section class="section">
  <div class="container">
    <div class="subtitle tags is-6 is-pulled-right">
      
      
<a class="subtitle is-6" href="/tags/scraping">#scraping</a>



  
  | <a class="subtitle is-6" href="/tags/belgian-politics">#Belgian politics</a>
  
  | <a class="subtitle is-6" href="/tags/twitter">#Twitter</a>
  

      
    </div>
    <h2 class="subtitle is-6">July 16, 2019</h2>
    <h1 class="title">members of the chamber of representatives of Belgium, 55th legistlature</h1>
    
    <div class="content">
      


<p>On 20/06/2019 the new chamber of representative was constituted for the 55th legislature. There are a fair number of new members in this assembly. In this post we will get their Twitter handles if they have one. This will make it possible to get their tweets and information about their accounts to be used in various analyses.</p>
<p>The process can get a tiny bit tedious because as far as I know there is no website regrouping the handles, we need to search for them using the rtweet package, roughly in the same way in which it was done for the last legislature.</p>
<p>The names of the new parliamentarians have been published on the official website (dekamer.be), but a lot of pictures are still missing so let’s focus on Twitter and get a list of names first.</p>
<pre class="r"><code>library(&quot;tidyverse&quot;)
library(&quot;rvest&quot;)
library(&quot;scales&quot;)
library(&quot;rtweet&quot;)</code></pre>
<pre class="r"><code>url &lt;- paste0(&quot;https://www.dekamer.be/kvvcr/showpage.cfm?section=/&quot;,
              &quot;depute&amp;language=nl&amp;cfm=cvlist54.cfm?legis=55&amp;today=y&quot;) # url to the members

table &lt;- url %&gt;% 
  read_html() %&gt;% 
  html_nodes(&quot;#story &gt; table&quot;) %&gt;% 
  html_table()

table &lt;- table[[1]] # extracting the dataframe

names(table) &lt;- c(&quot;ln_fn&quot;, &quot;party&quot;, &quot;d1&quot;, &quot;d2&quot;)

reps_55&lt;- table %&gt;% 
  select(ln_fn, party) %&gt;% 
  arrange(ln_fn)

head(reps_55) # have a peek</code></pre>
<pre><code>##                ln_fn party
## 1      Anseeuw Björn  N-VA
## 2         Arens Josy   cdH
## 3 Bacquelaine Daniel    MR
## 4       Bayet Hugues    PS
## 5        Beke Wouter  CD&amp;V
## 6   Ben Achour Malik    PS</code></pre>
<p>Some members were also part of the last legislature, and their handles were already found in a past post.</p>
<pre class="r"><code># the pre-exiting data
twitter_users &lt;- readRDS(&quot;~/R/blogs/content/post/data/20190502/twitter_users.rds&quot;) 

handles &lt;- twitter_users %&gt;% 
  select(ln_fn, screen_name)

missing_handles &lt;- reps_55 %&gt;% 
  left_join(handles) %&gt;% 
  filter(is.na(screen_name))</code></pre>
<pre><code>## Joining, by = &quot;ln_fn&quot;</code></pre>
<pre class="r"><code>nrow(missing_handles)</code></pre>
<pre><code>## [1] 83</code></pre>
<p>Of the 150 current members, 83 handles are missing. Makes you wonder how much current members did not seat in the last legislature…</p>
<pre class="r"><code># url to the members of 54
url &lt;- paste0(&quot;https://www.dekamer.be/kvvcr/showpage.cfm?section=/depute&amp;&quot;,
              &quot;language=nl&amp;cfm=cvlist54.cfm?legis=54&amp;today=n&quot;) 
table &lt;- url %&gt;% 
  read_html() %&gt;% 
  html_nodes(&quot;#story &gt; table&quot;) %&gt;% 
  html_table()

table &lt;- table[[1]] # extracting the dataframe

names(table) &lt;- c(&quot;ln_fn&quot;, &quot;party&quot;, &quot;d1&quot;, &quot;d2&quot;)

reps_54&lt;- table %&gt;% 
  select(ln_fn) %&gt;% 
  arrange(ln_fn) %&gt;% 
  mutate(legist = 54)

newer_members &lt;- reps_55 %&gt;% 
  left_join(reps_54) 


head(newer_members) # have a peek</code></pre>
<pre><code>##                ln_fn party legist
## 1      Anseeuw Björn  N-VA     NA
## 2         Arens Josy   cdH     NA
## 3 Bacquelaine Daniel    MR     54
## 4       Bayet Hugues    PS     NA
## 5        Beke Wouter  CD&amp;V     54
## 6   Ben Achour Malik    PS     NA</code></pre>
<p>Of course joining on names is not ideal, since this is error prone, but the results look more or less correct and the method will give a ball park figure to work with.</p>
<pre class="r"><code>newer_members %&gt;% filter(is.na(legist)) %&gt;% 
  nrow()/150</code></pre>
<pre><code>## [1] 0.5466667</code></pre>
<p>So that is 55% members who did not seat in the past legislature. What are the parties with the most new members?</p>
<pre class="r"><code>newer_members %&gt;% filter(is.na(legist)) %&gt;% 
  group_by(party) %&gt;% 
  summarise(new = n()) %&gt;% 
  arrange(desc(new))</code></pre>
<pre><code>## # A tibble: 12 x 2
##    party         new
##    &lt;chr&gt;       &lt;int&gt;
##  1 VB             17
##  2 Ecolo-Groen    12
##  3 PS             11
##  4 N-VA           10
##  5 PVDA-PTB       10
##  6 sp.a            7
##  7 Open Vld        5
##  8 MR              3
##  9 CD&amp;V            2
## 10 cdH             2
## 11 DéFI            2
## 12 INDEP           1</code></pre>
<p>And what are the parties with the highest ratio of new members?</p>
<pre class="r"><code>newer_members %&gt;%  
  group_by(party) %&gt;% 
  summarise(total = n()) %&gt;% 
  arrange(desc(total)) %&gt;% left_join(newer_members
                                     %&gt;% filter(is.na(legist)) %&gt;% 
                                       group_by(party) %&gt;% 
                                       summarise(new = n())) %&gt;% 
  mutate(prct = percent(new/total)) %&gt;% # using scales package
  arrange(desc(prct))</code></pre>
<pre><code>## # A tibble: 12 x 4
##    party       total   new prct  
##    &lt;chr&gt;       &lt;int&gt; &lt;int&gt; &lt;chr&gt; 
##  1 VB             18    17 94.4% 
##  2 PVDA-PTB       12    10 83.3% 
##  3 sp.a            9     7 77.8% 
##  4 Ecolo-Groen    21    12 57.1% 
##  5 PS             20    11 55.0% 
##  6 N-VA           24    10 41.7% 
##  7 Open Vld       12     5 41.7% 
##  8 cdH             5     2 40.0% 
##  9 MR             14     3 21.4% 
## 10 CD&amp;V           12     2 16.7% 
## 11 DéFI            2     2 100.0%
## 12 INDEP           1     1 100.0%</code></pre>
<pre class="r"><code>df &lt;- newer_members %&gt;%  
  group_by(party) %&gt;% 
  summarise(total = n()) %&gt;% 
  arrange(desc(total)) %&gt;% left_join(newer_members
                                     %&gt;% filter(is.na(legist)) %&gt;% 
                                       group_by(party) %&gt;% 
                                       summarise(new = n())) %&gt;% 
  mutate(percentt = percent(new/total)) %&gt;% # using scales package
  mutate(prct = (new/total)) %&gt;%
  arrange(desc(prct)) </code></pre>
<pre><code>## Joining, by = &quot;party&quot;</code></pre>
<pre class="r"><code>ggplot(df, aes(x = party, y = total, fill = prct)) +
  geom_bar(width=0.75, stat =  &quot;identity&quot;) +
  scale_fill_gradient(low = &quot;green&quot;, high = &quot;red&quot;) +
  theme_minimal() + 
  theme(axis.text=element_text(size=8)) + 
  labs(title=&quot;number of seats by party, color = % of newer members&quot;, 
         y = &quot;total seats&quot;)</code></pre>
<p><img src="/post/2019-07-16-members-of-the-chamber-of-representatives-of-belgium-55th-legistlature_files/figure-html/unnamed-chunk-9-1.png" width="672" /></p>
<p>Interesting. Of course the VB and PVDA-PTB have very high ratios, but so has the sp.a and others. But the point was to get the Twitter handles.</p>
<p>A function can be created to tweak the search_user function of the rtweet package. This tweak also limits the result to one, so that most obvious ones can be harvested.</p>
<pre class="r"><code>search_one &lt;- function(x){print (x)
  search_users(x, n=1) %&gt;% # only return one line per name
    mutate(ln_fn = x)} # keep track of who we searched for</code></pre>
<pre class="r"><code>twitter_users_new &lt;- map_df(missing_handles$ln_fn,possibly(.f= search_one, otherwise = NULL))</code></pre>
<p>The result contains 89 variables, so let’s looks at only some of them to see if we catched some reps Twitter handles.</p>
<pre class="r"><code>inspect &lt;- twitter_users_new %&gt;% 
  select(name, ln_fn, description, text, screen_name)</code></pre>
<p>These handles are not correct:</p>
<pre class="r"><code>no &lt;- c(&quot;BOUKILINABIL1&quot;, &quot;RobertoDAmicoMx&quot;,&quot;devuysts&quot;,
        &quot;NathalieDewulf1&quot;,&quot;mvandillen&quot;, &quot;M_Freilich&quot;,
        &quot;HanusMelissa&quot;,&quot;SamynEllen&quot;, &quot;Sneptje&quot;,
        &quot;VicaireAlbert&quot;)</code></pre>
<p>So there is a need to dig a bit deeper.</p>
<pre class="r"><code>not_correct &lt;- inspect %&gt;% 
  filter(screen_name %in% no) %&gt;% 
  select(ln_fn)

twitter_users_correct &lt;- twitter_users_new %&gt;% 
  filter(!ln_fn %in% not_correct$ln_fn)

search_ten &lt;- function(x){print (x)
  search_users(x, n=10) %&gt;% # only return one line per name
    mutate(ln_fn = x)} # keep track of who we searched for

twitter_users_10 &lt;- map_df(not_correct$ln_fn,possibly(.f= search_ten, otherwise = NULL))</code></pre>
<pre><code>## [1] &quot;Boukili Nabil&quot;
## [1] &quot;D&#39;Amico Roberto&quot;
## [1] &quot;De Vuyst Steven&quot;
## [1] &quot;Dewulf Nathalie&quot;
## [1] &quot;Dillen Marijke&quot;
## [1] &quot;Freilich Michael&quot;
## [1] &quot;Hanus Mélissa&quot;
## [1] &quot;Samyn Ellen&quot;
## [1] &quot;Sneppe Dominiek&quot;
## [1] &quot;Vicaire Albert&quot;</code></pre>
<pre class="r"><code>inspect_10 &lt;- twitter_users_10 %&gt;% 
  select(name, ln_fn, description, text, screen_name)</code></pre>
<pre class="r"><code># handels that seem correct:

on_twitter &lt;- c(&quot;NDewulf&quot;,&quot;dillenm&quot;, &quot;MichaelFreilich&quot;, &quot;e_samyn&quot;, 
                &quot;DewulfNathalie&quot;, &quot;VicaireAlbert&quot;)


not_on_twitter &lt;- c(&quot;Boukili Nabil&quot;, &quot;D&#39;Amico Roberto&quot;, &quot;Sneppe Dominiek&quot;, 
                     &quot;De Vuyst Steven&quot;)</code></pre>
<pre class="r"><code>add_users &lt;- twitter_users_10 %&gt;% 
  filter(screen_name %in% on_twitter)

twitter_users_correct &lt;- rbind(twitter_users_correct, add_users)</code></pre>
<pre class="r"><code>check &lt;- missing_handles %&gt;% 
  filter(!ln_fn %in% not_on_twitter) %&gt;% 
  filter(!ln_fn %in% twitter_users_correct$ln_fn)</code></pre>
<p>We still have 20 that gave no results? Try again</p>
<pre class="r"><code>twitter_users_again &lt;- map_df(check$ln_fn,possibly(.f= search_ten, otherwise = NULL))</code></pre>
<pre class="r"><code>inspect_again &lt;- twitter_users_again %&gt;% 
  select(name, ln_fn, description, text, screen_name)

on_twitter_again &lt;- c(&quot;peter_mertens&quot;, &quot;WouterVermeersc&quot;)

add_users &lt;- twitter_users_again %&gt;% 
  filter(screen_name %in% on_twitter)

twitter_users_correct &lt;- rbind(twitter_users_correct, add_users)</code></pre>
<p>So this gives 60 twitter handles of the 83 missing handles of our representatives in the 55th legislature. So we should have 127 twitter handles on a possible total of 150.</p>
<pre class="r"><code>existing_handles &lt;- reps_55 %&gt;% 
  left_join(handles) %&gt;% 
  filter(!is.na(screen_name))</code></pre>
<pre><code>## Joining, by = &quot;ln_fn&quot;</code></pre>
<pre class="r"><code>handles_55 &lt;- existing_handles %&gt;%
  select(-party) %&gt;% 
  rbind(twitter_users_correct %&gt;% 
          select(ln_fn, screen_name)) %&gt;% 
  filter(screen_name  != &quot;NDewulf&quot;) #two accounts?

reps_55 &lt;- reps_55 %&gt;% 
  left_join(handles_55)</code></pre>
<pre><code>## Joining, by = &quot;ln_fn&quot;</code></pre>
<pre class="r"><code>saveRDS(reps_55, &quot;./data/20190716/reps_55.rds&quot;)</code></pre>
<p>So now we have some Twitter handles of our representatives. That enables us to harverst their tweets. More soon.</p>

      
      <div class="related">

<h3>Similar articles:</h3>
<ul>
	
	<li><a href="/post/belgian-may-election-results-are-published-on-wikipedia/">Belgian May election results are published on Wikipedia</a></li>
	
	<li><a href="/post/belgian-parliamentarians-tweets/">Belgian parliamentarians tweets</a></li>
	
	<li><a href="/post/belgian-parliamentarians-twitter-accounts/">Belgian parliamentarians Twitter accounts</a></li>
	
	<li><a href="/post/members-of-the-chamber-of-representatives-of-belgium-54th-legistlature/">members of the chamber of representatives of Belgium, 54th legistlature</a></li>
	
	<li><a href="/post/metallica-rules-the-world/">Metallica rules the world</a></li>
	
</ul>
</div>
      
    </div>
    
  </div>
</section>


<section class="section">
  <div class="container">
    <aside><div id="disqus_thread"></div></aside>
  
    <div id="show_comments"><a id="load_comments" class="button is-link">Load comments</a></div>
  
    <script type="text/javascript">
      var disqus_shortname = 'bad-to-the-code';
      function disqus() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      }
  
      
      var hash = window.location.hash.substr(1);
      if ((hash.length > 8) && (hash.substring(0, 8) === "comment-")) {
        disqus();
        document.getElementById("show_comments").style.display = "none";
      } else {
        document.getElementById('load_comments').onclick = function() {
          disqus();
          document.getElementById("show_comments").style.display = "none";
        };
      }
  

    </script>
    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
  </div>
</section>


<section class="section">
  <div class="container has-text-centered">
    <p>&copy; <a href="https://github.com/madcap1090">William Bourgeois</a> 2020</p>
    
      <p>Powered by <a href="https://gohugo.io/">Hugo</a> &amp; <a href="https://github.com/ribice/kiss">Kiss</a>.</p>
    
  </div>
</section>


<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-137981534-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>


<script type="text/javascript">
  var _paq = _paq || [];
  _paq.push(['trackPageView']);
  _paq.push(['enableLinkTracking']);
  (function() {
    var u="\/\/matomo.example.com\/";
    _paq.push(['setTrackerUrl', u+'piwik.php']);
    _paq.push(['setSiteId', '1']);
    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
    g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);
  })();
</script>
<noscript>
  <img src="//matomo.example.com/piwik.php?idsite=1&amp;rec=1" style="border:0" alt="" />
</noscript>


</body>
</html>

