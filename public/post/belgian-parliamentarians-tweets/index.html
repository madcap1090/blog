<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"  lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1"/>

<title>Belgian parliamentarians tweets | bad to the code</title>

<meta property='og:title' content='Belgian parliamentarians tweets - bad to the code'>
<meta property='og:description' content='In the last post we were pretty successful in getting our parliamentarians Twitter handles. We can now use these to download their tweets.
The twitter API allows to download 3200 tweets per handle. This means that we will not be able to download all tweets of all parliamentarians from the last five years, because some of them tweeted more than 3200 during that time period. But there will be a fair amount.'>
<meta property='og:url' content='/post/belgian-parliamentarians-tweets/'>
<meta property='og:site_name' content='bad to the code'>
<meta property='og:type' content='article'><meta property='og:image' content='https://www.gravatar.com/avatar/5f460ebf37e30791f47bb5be3de73e3a?s=256'><meta property='article:author' content='https://facebook.com/OClassicoOficial/videos/391802167961744/'><meta property='article:section' content='Post'><meta property='article:tag' content='Belgian politics'><meta property='article:tag' content='Twitter'><meta property='article:published_time' content='2019-05-03T00:00:00Z'/><meta property='article:modified_time' content='2019-05-03T00:00:00Z'/><meta name='twitter:card' content='summary'><meta name='twitter:site' content='@WilliamBourgeoi'><meta name='twitter:creator' content='@WilliamBourgeoi'>


<link href="/index.xml" rel="alternate" type="application/rss+xml" title="bad to the code" />

<link rel="stylesheet" href="/css/style.css"/><link rel='stylesheet' href='/css/custom.css'><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/site.webmanifest">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" content="#ffffff">
</head>
<body>
<section class="section">
  <div class="container">
    <nav class="nav">
      <div class="nav-left">
        <a class="nav-item" href="/">
          <h1 class="title is-4">bad to the code</h1>
        </a>
      </div>
      <div class="nav-right">
        <nav class="nav-item level is-mobile"><a class="level-item" aria-label="facebook" href='https://facebook.com/OClassicoOficial/videos/391802167961744/'
            target='_blank' rel='noopener'>
            <span class="icon">
              <i class><svg viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
    
    <path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"/>
    
  </svg></i>
            </span>
          </a><a class="level-item" aria-label="email" href='mailto:madcap1090@gmail.com'
            target='_blank' rel='noopener'>
            <span class="icon">
              <i class><svg viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
    
    <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>
    <polyline points="22,6 12,13 2,6"/>
    
  </svg></i>
            </span>
          </a><a class="level-item" aria-label="linkedin" href='https://linkedin.com/in/williambourgeois'
            target='_blank' rel='noopener'>
            <span class="icon">
              <i class><svg viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
    
    <path stroke-width="1.8" d="m5.839218,4.101561c0,1.211972 -0.974141,2.194011 -2.176459,2.194011s-2.176459,-0.982039 -2.176459,-2.194011c0,-1.211094 0.974141,-2.194011 2.176459,-2.194011s2.176459,0.982917 2.176459,2.194011zm0.017552,3.94922l-4.388022,0l0,14.04167l4.388022,0l0,-14.04167zm7.005038,0l-4.359939,0l0,14.04167l4.360816,0l0,-7.370999c0,-4.098413 5.291077,-4.433657 5.291077,0l0,7.370999l4.377491,0l0,-8.89101c0,-6.915523 -7.829986,-6.66365 -9.669445,-3.259423l0,-1.891237z"/>
    
  </svg></i>
            </span>
          </a><a class="level-item" aria-label="twitter" href='https://twitter.com/WilliamBourgeoi'
            target='_blank' rel='noopener'>
            <span class="icon">
              <i class><svg viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
    
    <path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"/>
    
  </svg></i>
            </span>
          </a><a class="level-item" aria-label="github" href='https://github.com/madcap1090'
            target='_blank' rel='noopener'>
            <span class="icon">
              <i class><svg viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
    
    <path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"/>
    
  </svg></i>
            </span>
          </a></nav>
      </div>
    </nav>

    <nav class="nav">
      

      
    </nav>

  </div>
</section>
<section class="section">
  <div class="container">
    <div class="subtitle tags is-6 is-pulled-right">
      
      
<a class="subtitle is-6" href="/tags/belgian-politics">#Belgian politics</a>



  
  | <a class="subtitle is-6" href="/tags/twitter">#Twitter</a>
  

      
    </div>
    <h2 class="subtitle is-6">May 3, 2019</h2>
    <h1 class="title">Belgian parliamentarians tweets</h1>
    
    <div class="content">
      


<p>In the last post we were pretty successful in getting our parliamentarians Twitter handles. We can now use these to download their tweets.</p>
<p>The twitter API allows to download 3200 tweets per handle. This means that we will not be able to download all tweets of all parliamentarians from the last five years, because some of them tweeted more than 3200 during that time period. But there will be a fair amount.</p>
<p>These tweets will also have to be ‚Äòcleaned‚Äô of special characters like emojis and links in order to analyse them further without the different packages choking on them.</p>
<p>As usually first the libraries and options:</p>
<pre class="r"><code>library(&quot;tidyverse&quot;)
library(&quot;gmp&quot;)
library(&quot;glue&quot;)
library(&quot;rtweet&quot;)
library(&quot;cld2&quot;) 
library(&quot;textcat&quot;)
library(&quot;qdapRegex&quot;)
library(&quot;xml2&quot;)
library(&quot;rvest&quot;)
library(&quot;lubridate&quot;)

# options 

options(scipen=999)
stringAsFactors = FALSE</code></pre>
<p>And here is the function to get the tweets (for now just 1 for testing, because 3200 tweets takes a while):</p>
<pre class="r"><code>get_handle_tweets &lt;- function(handle) {
  tweets_handle &lt;&lt;- get_timeline(handle, n=1)
  n &lt;- nrow(tweets_handle)
    print(glue(&quot;{handle} {n} tweets added&quot;))
}</code></pre>
<p>And a function to clean the tweets:</p>
<pre class="r"><code>to_byte &lt;- function (x) {
  Encoding(x) &lt;- &quot;latin1&quot;
  iconv(x, &quot;latin1&quot;, &quot;ASCII&quot;, &quot;byte&quot;)
}</code></pre>
<p>Here are the handles:</p>
<pre class="r"><code>twitter_users &lt;- readRDS(&quot;~/R/blogs/content/post/data/20190502/twitter_users.rds&quot;)</code></pre>
<p>A test</p>
<pre class="r"><code>twitter_users$screen_name[3]</code></pre>
<pre><code>## [1] &quot;SonjaBecq&quot;</code></pre>
<p>It‚Äôs not strictly needed since we already know the correspondence between name and handle (‚Äòscreen_name‚Äô), but it‚Äôs fun to try map2_df. A test with two tweets:</p>
<pre class="r"><code>get_handle_tweets &lt;- function(screen_name, ln_fn) {
  get_timeline(screen_name, n=2) %&gt;% 
    mutate(ln_fn = ln_fn)
}

tweets &lt;- map2_df(twitter_users$screen_name,twitter_users$ln_fn, 
             possibly(get_handle_tweets, otherwise = NULL))
dim(tweets)</code></pre>
<pre><code>## [1] 315  89</code></pre>
<p>Now might be a good time to talk about rate limits. We are limited to go 3200 tweets in the past per handle, but we have also temporary limits to the calls we can do with the API.</p>
<pre class="r"><code>limits &lt;- rate_limits()
head(limits)</code></pre>
<pre><code>## # A tibble: 6 x 7
##   query limit remaining reset reset_at            timestamp           app  
##   &lt;chr&gt; &lt;int&gt;     &lt;int&gt; &lt;tim&gt; &lt;dttm&gt;              &lt;dttm&gt;              &lt;chr&gt;
## 1 list~    15        15 15.0~ 2019-05-12 11:26:00 2019-05-12 11:10:57 madc~
## 2 list~    75        75 15.0~ 2019-05-12 11:26:00 2019-05-12 11:10:57 madc~
## 3 list~    15        15 15.0~ 2019-05-12 11:26:00 2019-05-12 11:10:57 madc~
## 4 list~   900       900 15.0~ 2019-05-12 11:26:00 2019-05-12 11:10:57 madc~
## 5 list~    15        15 15.0~ 2019-05-12 11:26:00 2019-05-12 11:10:57 madc~
## 6 list~    75        75 15.0~ 2019-05-12 11:26:00 2019-05-12 11:10:57 madc~</code></pre>
<p>In total there are 149 limits, we can access, among other things, how much remains and when the limit will be reset. Here are some of the limits:</p>
<pre class="r"><code>head(limits$query, 20)</code></pre>
<pre><code>##  [1] &quot;lists/list&quot;                    &quot;lists/memberships&quot;            
##  [3] &quot;lists/subscribers/show&quot;        &quot;lists/members&quot;                
##  [5] &quot;lists/subscriptions&quot;           &quot;lists/show&quot;                   
##  [7] &quot;lists/ownerships&quot;              &quot;lists/subscribers&quot;            
##  [9] &quot;lists/members/show&quot;            &quot;lists/statuses&quot;               
## [11] &quot;application/rate_limit_status&quot; &quot;mutes/users/list&quot;             
## [13] &quot;mutes/users/ids&quot;               &quot;live_video_stream/status/:id&quot; 
## [15] &quot;friendships/outgoing&quot;          &quot;friendships/list&quot;             
## [17] &quot;friendships/no_retweets/ids&quot;   &quot;friendships/lookup&quot;           
## [19] &quot;friendships/incoming&quot;          &quot;friendships/show&quot;</code></pre>
<p>At this point we need to keep an eye on limits tweets (#49) and limits queries (#11).</p>
<pre class="r"><code>limits %&gt;% select(limit, query, remaining, reset) %&gt;% 
  filter(query ==  &quot;application/rate_limit_status&quot;|
          query ==  &quot;statuses/user_timeline&quot;) %&gt;% 
  mutate(reset = round(reset, 2))</code></pre>
<pre><code>## # A tibble: 2 x 4
##   limit query                         remaining reset     
##   &lt;int&gt; &lt;chr&gt;                             &lt;int&gt; &lt;time&gt;    
## 1   180 application/rate_limit_status        20 13.75 mins
## 2   900 statuses/user_timeline              741 13.75 mins</code></pre>
<p>We are searching 160 users and the rate limit for searching user timelines is 900, so we should be fine. But be aware that your limit searches are limited also (180 searches counted by individual limit in batches of 15 minutes).</p>
<p>At a certain point in time it might be useful to periodically query certain limits and to then pause the code in order not to produce interruptions.</p>
<p>How well did our test go? Did we get tweets from everyone?</p>
<pre class="r"><code>setdiff(twitter_users$ln_fn, tweets$ln_fn)</code></pre>
<pre><code>## character(0)</code></pre>
<p>Nice. The results look ok too. Will now launch the bigger batch (3200) while out playing some üè∏ and after having waited fifteen minutes to be sure all rate limits were reset.</p>
<pre class="r"><code>twitter_users &lt;- twitter_users %&gt;% 
  arrange(screen_name) %&gt;% 
  distinct(screen_name, .keep_all = TRUE) # removing doubles if present

get_handle_tweets &lt;- function(screen_name, ln_fn) {
  print(screen_name) # this can be used to see the advancement
  get_timeline(screen_name, n=3200) %&gt;% 
    mutate(ln_fn = ln_fn)
}

system.time(tweets &lt;- map2_df(twitter_users$screen_name,twitter_users$ln_fn, 
             possibly(get_handle_tweets, otherwise = NULL)))
dim(tweets)</code></pre>
<pre class="r"><code>saveRDS(tweets, &quot;./data/20190503/tweets.rds&quot;)</code></pre>
<p>Cool, so about 265K tweets.</p>
<p>But as already mentioned these are some of the tweets from people who at some time were in the 54th legislature. They are not always a tweet from a person actually seating in parliament.</p>
<p>This Wikipedia page <a href="https://nl.Wikipedia.org/wiki/Kamer_van_volksvertegenwoordigers_(samenstelling_2014-2019)" class="uri">https://nl.Wikipedia.org/wiki/Kamer_van_volksvertegenwoordigers_(samenstelling_2014-2019)</a> has a good overview of the changes that occurred since May 2014.</p>
<p>A few have also changed party or became independent. The table that was used to obtain the list of parliamentarian‚Äôs names, language and party, can be transformed into a reference table that we can join to the tweets for further analysis.</p>
<pre class="r"><code>names &lt;- readRDS(&quot;./data/190417/names.rds&quot;)
party_less &lt;- names %&gt;% 
  filter(is.na(party))</code></pre>
<p>The text on the Wikipedia page contains the information that is needed, but I wonder how easy it will be to use. We can try, let‚Äôs see what we get.</p>
<pre class="r"><code>url &lt;- &quot;https://nl.Wikipedia.org/wiki/Kamer_van_volksvertegenwoordigers_(samenstelling_2014-2019)&quot; 

wiki_table_source&lt;- url %&gt;% 
  read_html() %&gt;%
  html_node(xpath = &#39;//*[@id=&quot;mw-content-text&quot;]/div/table[4]&#39;)  %&gt;%
  html_table(fill = TRUE)

head(wiki_table_source)</code></pre>
<pre><code>##                 Volksvertegenwoordiger Fractie Kieskring  Taalgroep
## 1         Almaci, Meyrem Meyrem Almaci   Groen Antwerpen Nederlands
## 2           Bellens, Rita Rita Bellens    N-VA Antwerpen Nederlands
## 3         Calvo, Kristof Kristof Calvo   Groen Antwerpen Nederlands
## 4 De Coninck, Monica Monica De Coninck    sp.a Antwerpen Nederlands
## 5             Demir, Zuhal Zuhal Demir    N-VA Antwerpen Nederlands
## 6     De Roover, Peter Peter De Roover    N-VA Antwerpen Nederlands
##                                                                                                                          Opmerkingen
## 1                                                                                                                               &lt;NA&gt;
## 2                                                                                                                               &lt;NA&gt;
## 3                                                                                                                               &lt;NA&gt;
## 4                                                                                                                               &lt;NA&gt;
## 5 Werd van 9 maart 2017 tot 9 december 2018 als staatssecretaris in de federale regering-Michel I vervangen door Wim Van der Donckt.
## 6                                                                                                                               &lt;NA&gt;</code></pre>
<p>The nice thing is that additional information like the voting district was obtained. Using the comments (‚ÄúOpmerkingen‚Äù), will probably be more time consuming than hard coding the changes, but I think it will be more fun ;-)</p>
<p>That is if you are interested in data cleaning. If not no need to continue reading this post, because it will be all spring cleaning from now till the end.</p>
<pre class="r"><code>wiki_table_source %&gt;% 
  filter(!is.na(Opmerkingen)) %&gt;% 
  select(Opmerkingen)</code></pre>
<pre><code>##                                                                                                                                                                                                                                                             Opmerkingen
## 1                                                                                                                                    Werd van 9 maart 2017 tot 9 december 2018 als staatssecretaris in de federale regering-Michel I vervangen door Wim Van der Donckt.
## 2                                                                                                                                                Werd van 14 oktober 2014 tot 9 december 2018 als minister in de federale regering-Michel I vervangen door Johan Klaps.
## 3                                                                                                                                                                                           Vervangt vanaf 19 juni 2014 Marijke Dillen, die beslist om niet te zetelen.
## 4                                                      Vervangt sinds 3 mei 2018 Annemie Turtelboom, die lid wordt van de Europese Rekenkamer. Eerder verving hij van 30 juli 2014 tot 29 april 2016 Turtelboom toen die minister was in de Vlaamse Regering-Bourgeois.
## 5                                                                                                                                                                                                                        Voorzitter van de Kamer vanaf 14 oktober 2014.
## 6                                      Vervangt vanaf 10 november 2016 Sarah Claerhout, die uit CD&amp;V stapt en haar zetel aan haar partij teruggeeft. Claerhout zelf verving 14 oktober 2014 Pieter De Crem, die staatssecretaris in de federale regering-Michel I werd.
## 7                                                                                                                                                                  Vervangt vanaf 14 oktober 2014 Alexander De Croo, die minister in de federale regering-Michel I werd
## 8                                                                                                                                                                                                                        Zetelt vanaf 14 maart 2019 als onafhankelijke.
## 9                                                                                                                                                                     Vervangt vanaf 24 augustus 2017 Denis Ducarme, die minister in de federale Regering-Michel I werd
## 10                                                                                                                                                                            Vervangt vanaf 24 mei 2018 Eric Massin, die voltijds OCMW-voorzitter van Charleroi wordt.
## 11                                                                                                                                                           Vervangt vanaf 14 oktober 2014 Marie-Christine Marghem, die minister in de federale regering-Michel I werd
## 12                                                                                                                                                       Vervangt vanaf 6 december 2018 Sabien Lahaye-Battheu, die gedeputeerde van de provincie West-Vlaanderen wordt.
## 13                                                                                                                                                                    Vervangt vanaf 12 januari 2017 Johan Vande Lanotte, die voltijds burgemeester van Oostende wordt.
## 14                                                                                                                                                                          Vervangt vanaf 13 december 2017 Ann Vanheste, die voltijds burgemeester van De Panne wordt.
## 15                                                                                                                                                                                                                                          Vanaf 19 november 2015 D√©Fi
## 16                                                                                                                                                                 Vervangt vanaf 30 juli 2014 C√©line Fremault, die minister in de Brusselse regering-Vervoort II wordt
## 17                                                                                                                                                                                       Vervangt vanaf 6 december 2018 Benoit Hellings, die schepen van Brussel wordt.
## 18                                                                                                                                                                                     Vervangt vanaf 28 mei 2015 Zakia Khattabi, die partijvoorzitter van Ecolo wordt.
## 19                                                                                                                                                                                                                                         Vanaf 19 november 2015 D√©Fi.
## 20                                                       Vervangt vanaf 22 september 2015 Sophie Wilm√®s, die minister wordt in de federale regering-Michel I. Wilm√®s zelf verving vanaf 11 oktober 2014 Didier Reynders, die ook minister in de regering-Michel I werd.
## 21                                                                                                                                                                              Vervangt vanaf 9 november 2017 Willy Demeyer, die voltijds burgemeester van Luik wordt.
## 22                                                                                                                                                           Vervangt vanaf 18 oktober 2018 Muriel Gerkens, die zich kandidaat stelt bij de provincieraadsverkiezingen.
## 23                                                                                                                                                                Vervangt vanaf 14 oktober 2014 Daniel Bacquelaine, die minister in de federale regering-Michel I werd
## 24                                                                                                                                                                                                           De Duitstalige Jadin behoort tot de Franstalige taalgroep.
## 25                                                                                                                                                                               Vervangt vanaf 23 april 2015 Melchior Wathelet, die actief wordt in het bedrijfsleven.
## 26                                                                                                                                            Werd van 14 oktober 2014 tot 9 december 2018 als minister in de federale regering-Michel I vervangen door Renate Hufkens.
## 27                                                                                                                                                                   Vervangt vanaf 14 oktober 2014 Maggie De Block, die minister in de federale regering-Michel I werd
## 28                                                                                                                                                                        Vervangt vanaf 14 oktober 2014 Koen Geens, die minister in de federale regering-Michel I werd
## 29                                                                                                                                                  Zetelt van 22 september tot 27 oktober 2016 als onafhankelijke en vanaf 27 oktober 2016 in de Vuye&amp;Wouters-fractie.
## 30                                                                                                                                                                                                             Voorzitter van de Kamer van 30 juni tot 14 oktober 2014.
## 31                                                                                                                                            Werd van 14 oktober 2014 tot 12 november 2018 als minister in de federale regering-Michel I vervangen door Wouter Raskin.
## 32                                                                                                                                                Zetelt vanaf 22 september tot 27 oktober 2016 als onafhankelijke en vanaf 27 oktober 2016 in de Vuye&amp;Wouters-fractie.
## 33 Vervangt vanaf 4 oktober 2018 St√©phane Crusni√®re, die financieel en administratief directeur van de R√©gie Communale Autonome van Waver wordt. Crusni√®re verving vanaf 30 juli 2014 Andr√© Flahaut, die minister in de regering-Demotte III (Franse Gemeenschap) werd.
## 34                                                                                                                                                                    Vervangt vanaf 14 oktober 2014 Charles Michel, die minister in de federale regering-Michel I werd
## 35                                                                                                                                                                                         Vervangt vanaf 20 september 2018 Isabelle Poncelet, die de politiek verlaat.</code></pre>
<p>‚ÄòVervangt‚Äô means ‚Äòreplaces‚Äô, so these are members that replaced someone who took on another mandate. ‚ÄòWerd‚Äô means ‚Äòwas‚Äô, so these were replaced.</p>
<pre class="r"><code>wiki_table &lt;- wiki_table_source %&gt;% 
  filter(!is.na(Opmerkingen)) %&gt;% 
  mutate(first_word = str_extract(Opmerkingen,&quot;(\\w+)&quot;))</code></pre>
<p>In the comments (Opmerkingen) there are up to three dates that we need. A first step would be to change the month names in numbers. And then extract all the numbers into a list.</p>
<pre class="r"><code>wiki_table &lt;- wiki_table %&gt;% 
  mutate(Opmerkingen = gsub(&quot;januari&quot;, 1, Opmerkingen),
         Opmerkingen = gsub(&quot;februari&quot;, 2, Opmerkingen),
         Opmerkingen = gsub(&quot;maart&quot;, 3, Opmerkingen),
         Opmerkingen = gsub(&quot;april&quot;, 4, Opmerkingen),
         Opmerkingen = gsub(&quot;mei&quot;, 5, Opmerkingen),
         Opmerkingen = gsub(&quot;juni&quot;, 6, Opmerkingen),
         Opmerkingen = gsub(&quot;juli&quot;, 7, Opmerkingen),
         Opmerkingen = gsub(&quot;augustus&quot;, 8, Opmerkingen),
         Opmerkingen = gsub(&quot;september&quot;, 9, Opmerkingen),
         Opmerkingen = gsub(&quot;oktober&quot;, 10, Opmerkingen),
         Opmerkingen = gsub(&quot;november&quot;, 11, Opmerkingen),
         Opmerkingen = gsub(&quot;december&quot;, 12, Opmerkingen)) %&gt;%
    mutate(digits = str_extract_all(Opmerkingen,&quot;([0-9]+)&quot;)) %&gt;% #&#39;+&#39; keeps them together
  filter(first_word != &quot;De&quot;) # this one has no date 



inspect &lt;-wiki_table$digits
inspect[[20]]</code></pre>
<pre><code>## [1] &quot;22&quot;   &quot;9&quot;    &quot;2015&quot; &quot;11&quot;   &quot;10&quot;   &quot;2014&quot;</code></pre>
<p>It will be more difficult to handle the digits if days and months smaller than 10 do not have a leading 0. So one needs to be added, before concatenating all the numbers</p>
<pre class="r"><code>for (i in (1:length(inspect))){
  for (j in (1:length(inspect[[i]]))){
    if (nchar(inspect[[i]][j]) == 1) {inspect[[i]][j] &lt;- paste0(&quot;0&quot;,inspect[[i]][j])}
  }
  inspect[[i]] &lt;- paste0(inspect[[i]], collapse = &quot;&quot;)
  print(inspect[[i]])
}</code></pre>
<pre><code>## [1] &quot;0903201709122018&quot;
## [1] &quot;1410201409122018&quot;
## [1] &quot;19062014&quot;
## [1] &quot;030520183007201429042016&quot;
## [1] &quot;14102014&quot;
## [1] &quot;1011201614102014&quot;
## [1] &quot;14102014&quot;
## [1] &quot;14032019&quot;
## [1] &quot;24082017&quot;
## [1] &quot;24052018&quot;
## [1] &quot;14102014&quot;
## [1] &quot;06122018&quot;
## [1] &quot;12012017&quot;
## [1] &quot;13122017&quot;
## [1] &quot;19112015&quot;
## [1] &quot;30072014&quot;
## [1] &quot;06122018&quot;
## [1] &quot;28052015&quot;
## [1] &quot;19112015&quot;
## [1] &quot;2209201511102014&quot;
## [1] &quot;09112017&quot;
## [1] &quot;18102018&quot;
## [1] &quot;14102014&quot;
## [1] &quot;23042015&quot;
## [1] &quot;1410201409122018&quot;
## [1] &quot;14102014&quot;
## [1] &quot;14102014&quot;
## [1] &quot;22092710201627102016&quot;
## [1] &quot;300614102014&quot;
## [1] &quot;1410201412112018&quot;
## [1] &quot;22092710201627102016&quot;
## [1] &quot;0410201830072014&quot;
## [1] &quot;14102014&quot;
## [1] &quot;20092018&quot;</code></pre>
<pre class="r"><code># pure poetry if you ask me

con_dates &lt;- data.frame(&quot;condate&quot; = unlist(inspect))
wiki_table &lt;- wiki_table %&gt;% 
  cbind(con_dates) %&gt;% 
  select(-digits)</code></pre>
<p>Now we can extract the dates, but one problem still remains, on Wikipedia some years are not repeated for certain time periods:</p>
<pre class="r"><code>wiki_table$Opmerkingen[28]</code></pre>
<pre><code>## [1] &quot;Zetelt van 22 9 tot 27 10 2016 als onafhankelijke en vanaf 27 10 2016 in de Vuye&amp;Wouters-fractie.&quot;</code></pre>
<pre class="r"><code>as.character(wiki_table$condate[28])</code></pre>
<pre><code>## [1] &quot;22092710201627102016&quot;</code></pre>
<p>A little bit more work is needed.</p>
<pre class="r"><code>wiki_table &lt;- wiki_table %&gt;% 
  mutate(date_1 = 
           ifelse(substr(condate,5,6) == &quot;20&quot;,
                  substr(condate,1,8),
                  paste0(substr(condate,1,4),
                    substr(condate,str_locate(condate, &quot;201&quot;),
                            str_locate(condate, &quot;201&quot;) + 3))
                  )
         ) %&gt;% 
   mutate(date_2 = 
           ifelse(substr(condate,5,6) == &quot;20&quot;,
                  substr(condate,9,16),
                  paste0(
                    substr(condate,str_locate(condate, &quot;201&quot;)-4,
                            str_locate(condate, &quot;201&quot;) + 3))
                  )
         ) %&gt;% 
   mutate(date_3 = 
           ifelse(substr(condate,5,6) == &quot;20&quot;,
                  substr(condate,17,24),
                  &quot;&quot;)
         ) %&gt;% 
  select(-condate)


wiki_table &lt;- wiki_table %&gt;% 
  mutate(date_1 = dmy(as.numeric(date_1)),
         date_2 = dmy(as.numeric(date_2)),
         date_3 = dmy(as.numeric(date_3)),
                )</code></pre>
<p>There are other possibilities, but here we will use a table with one line per period a person seated for a party. To later use in the analysis of the tweets collected. In that table there will be one start date and one end date. A good start is assuming everyone started at ‚Äú2014-06-19‚Äù and ended at ‚Äú2019-05-31‚Äù, and then making corrections afterwards.</p>
<p>We can start by consolidating our tables.</p>
<pre class="r"><code>setdiff(names(wiki_table),names(wiki_table_source))</code></pre>
<pre><code>## [1] &quot;first_word&quot; &quot;date_1&quot;     &quot;date_2&quot;     &quot;date_3&quot;</code></pre>
<pre class="r"><code>wiki_table &lt;- wiki_table %&gt;% 
  rbind(wiki_table_source %&gt;% 
          filter(is.na(Opmerkingen) 
                 | Volksvertegenwoordiger == &quot;Jadin, Kattrin Kattrin Jadin&quot;) %&gt;%
          mutate(first_word = &quot;&quot;,
                 date_1 = as.Date(&quot;2001-01-01&quot;),
                 date_2 = as.Date(&quot;2001-01-01&quot;),
                 date_3 = as.Date(&quot;2001-01-01&quot;))
                              )</code></pre>
<p>Aw, shoot did not see the names are funky.</p>
<pre class="r"><code>head(wiki_table$Volksvertegenwoordiger)</code></pre>
<pre><code>## [1] &quot;Demir, Zuhal Zuhal Demir&quot;                  
## [2] &quot;Jambon, Jan Jan Jambon&quot;                    
## [3] &quot;Penris, Jan Jan Penris&quot;                    
## [4] &quot;Wilrycx, Frank Frank Wilrycx&quot;              
## [5] &quot;Bracke, Siegfried Siegfried Bracke&quot;        
## [6] &quot;Van Peteghem, Vincent Vincent Van Peteghem&quot;</code></pre>
<p>Maybe we can join on the concatenation of letters.</p>
<pre class="r"><code>x &lt;- wiki_table %&gt;% 
  mutate(join = str_remove_all(Volksvertegenwoordiger,&quot; &quot;),
         join = str_remove_all(join,&quot;,&quot;),
         join = substr(join,1, nchar(join)/2))

y &lt;- names %&gt;% 
  mutate(join = str_remove_all(ln_fn,&quot; &quot;))

z &lt;- y %&gt;% 
  left_join(x)</code></pre>
<pre><code>## Joining, by = &quot;join&quot;</code></pre>
<pre class="r"><code>test &lt;- z %&gt;% 
  filter(!is.na(Volksvertegenwoordiger)) %&gt;% 
  mutate(test = &quot;test&quot;)
  
missing &lt;- wiki_table %&gt;% 
  left_join(test %&gt;% 
              select(Volksvertegenwoordiger, test)) %&gt;% 
  filter(is.na(test))</code></pre>
<pre><code>## Joining, by = &quot;Volksvertegenwoordiger&quot;</code></pre>
<pre class="r"><code>missing$Volksvertegenwoordiger</code></pre>
<pre><code>## [1] &quot;Van de Velde, Rob Rob Van de Velde&quot;                  
## [2] &quot;Fernandez-Fernandez, Julie Julie Fernandez-Fernandez&quot;
## [3] &quot;Jirofl√©e, Karine Karine Jirofl√©e&quot;</code></pre>
<p>Yes I‚Äôve got myself in a pickle again. Three missing. The join field for them should be VandeVeldeRobert, Jirofl√©eKarin and, FernandezFernandezJulie. Instead of VandeVeldeRob, Jirofl√©eKarine and Fernandez-FernandezJulie.</p>
<p>We can follow how they are spelled on dekamer.be: Robert Van de Velde, Karin Jirofl√©e, Julie Fernandez Fernandez</p>
<pre class="r"><code>x[x$join == &quot;VandeVeldeRob&quot;,]$join &lt;- &quot;VandeVeldeRobert&quot;
x[x$join == &quot;Jirofl√©eKarine&quot;,]$join &lt;- &quot;Jirofl√©eKarin&quot;
x[x$join == &quot;Fernandez-FernandezJulie&quot;,]$join &lt;- &quot;FernandezFernandezJulie&quot;

y &lt;- names %&gt;% 
  mutate(join = str_remove_all(ln_fn,&quot; &quot;))

z &lt;- y %&gt;% 
  left_join(x)</code></pre>
<pre><code>## Joining, by = &quot;join&quot;</code></pre>
<pre class="r"><code>test &lt;- z %&gt;% 
  filter(!is.na(Volksvertegenwoordiger)) %&gt;% 
  mutate(test = &quot;test&quot;)
  
missing &lt;- wiki_table %&gt;% 
  left_join(test %&gt;% 
              select(Volksvertegenwoordiger, test)) %&gt;% 
  filter(is.na(test))</code></pre>
<pre><code>## Joining, by = &quot;Volksvertegenwoordiger&quot;</code></pre>
<pre class="r"><code>missing$Volksvertegenwoordiger</code></pre>
<pre><code>## character(0)</code></pre>
<p>Yeah! So now we have em all we can give em a default start date and a default end date.</p>
<pre class="r"><code>reps54 &lt;- z %&gt;% 
  mutate(start_date = as.Date(&quot;2014-06-19&quot;),
         end_date = as.Date(&quot;2019-05-31&quot;)) %&gt;% 
  mutate(fn_ln = trimws(fn_ln, c(&quot;both&quot;)))</code></pre>
<p>Maybe we can start with those who only have one ‚Äòdate_1‚Äô? Let‚Äôs have a look.</p>
<pre class="r"><code>one_date &lt;- reps54 %&gt;% 
  filter(!is.na(date_1) &amp;
           is.na(date_2))

unique(one_date$first_word)</code></pre>
<pre><code>## [1] &quot;Voorzitter&quot; &quot;Vanaf&quot;      &quot;Vervangt&quot;   &quot;Zetelt&quot;</code></pre>
<p>‚ÄúVoorzitter‚Äù is the president of the chamber. Not interested in this for now, so no change to be made. ‚ÄúVanaf‚Äù seems to indicate a change of party and/or party name. What happened to the <a href="https://en.wikipedia.org/wiki/D%C3%A9FI">FDF</a>? Seems to have been a name change.</p>
<p>In the data that come from the official website these members are already ‚ÄòD√©fi‚Äô in the field ‚ÄòParty‚Äô. We can work on the field ‚Äòfractie‚Äô (party) but I doubt it will be needed.</p>
<pre class="r"><code>fdf &lt;- one_date %&gt;% 
  filter(first_word == &quot;Vanaf&quot;) %&gt;% 
  mutate(end_date = ymd(date_1) -days(1)) %&gt;% 
  rbind(one_date %&gt;% 
          filter(first_word == &quot;Vanaf&quot;) %&gt;% 
          mutate(start_date = date_1,
                 Fractie = &quot;D√©fi&quot;))

one_date &lt;- one_date %&gt;% 
  filter(first_word != &quot;Vanaf&quot;) %&gt;% 
  rbind(fdf)</code></pre>
<p>So that takes care of ‚ÄòVanaf‚Äô, now for ‚ÄúVervangt‚Äù (replaces). Which looks pretty straightforward. The date_1 just needs to replace the start date.</p>
<pre class="r"><code>replaces &lt;- one_date %&gt;% 
  filter(first_word == &quot;Vervangt&quot;) %&gt;% 
  mutate(start_date = date_1)

one_date &lt;- one_date %&gt;% 
  filter(first_word != &quot;Vervangt&quot;) %&gt;% 
  rbind(replaces)</code></pre>
<p>In this case ‚ÄòZetelt‚Äô means the person became independent. I doubt it will make a big difference to make the change for one person, but for the sake of precision, here is the correction.</p>
<pre class="r"><code>zetelt &lt;- one_date %&gt;% 
  filter(first_word == &quot;Zetelt&quot;) %&gt;% 
  mutate(end_date = ymd(date_1) -days(1)) %&gt;% 
  rbind(one_date %&gt;% 
          filter(first_word == &quot;Zetelt&quot;) %&gt;% 
          mutate(start_date = date_1,
                 Fractie = &quot;ONAFH&quot;))

one_date &lt;- one_date %&gt;% 
  filter(first_word != &quot;Zetelt&quot;) %&gt;% 
  rbind(zetelt)</code></pre>
<p>Now just need to bind them and go to the next batch.</p>
<pre class="r"><code>reps54 &lt;- reps54 %&gt;% 
  filter(is.na(date_1) | date_1 == &quot;2001-01-01&quot;
         | (date_1 != &quot;2001-01-01&quot; &amp; date_2 != &quot;2001-01-01&quot;))%&gt;% 
  rbind(one_date)</code></pre>
<p>two_dates</p>
<pre class="r"><code>two_dates &lt;- reps54 %&gt;% 
  filter(!is.na(date_1) &amp;
           !is.na(date_2) &amp;
           is.na(date_3))

unique(two_dates$first_word)</code></pre>
<pre><code>## [1] &quot;Vervangt&quot;   &quot;Werd&quot;       &quot;Voorzitter&quot; &quot;Zetelt&quot;</code></pre>
<p>There are now three replacements (Vervangt) with two dates in the comment phrase. It is getting complicated, but fortunately they seem to be structured the same way.</p>
<pre class="r"><code>two_dates %&gt;% filter(first_word == &quot;Vervangt&quot;) %&gt;% 
  select(Opmerkingen)</code></pre>
<pre><code>##                                                                                                                                                                                                                                                    Opmerkingen
## 1                                                            Vervangt vanaf 22 9 2015 Sophie Wilm√®s, die minister wordt in de federale regering-Michel I. Wilm√®s zelf verving vanaf 11 10 2014 Didier Reynders, die ook minister in de regering-Michel I werd.
## 2 Vervangt vanaf 4 10 2018 St√©phane Crusni√®re, die financieel en administratief directeur van de R√©gie Communale Autonome van Waver wordt. Crusni√®re verving vanaf 30 7 2014 Andr√© Flahaut, die minister in de regering-Demotte III (Franse Gemeenschap) werd.
## 3                                        Vervangt vanaf 10 11 2016 Sarah Claerhout, die uit CD&amp;V stapt en haar zetel aan haar partij teruggeeft. Claerhout zelf verving 14 10 2014 Pieter De Crem, die staatssecretaris in de federale regering-Michel I werd.</code></pre>
<p>So we are looking at these parliamentarians:</p>
<pre class="r"><code>two_dates %&gt;% filter(first_word == &quot;Vervangt&quot;) %&gt;% 
  select(fn_ln)</code></pre>
<pre><code>##                  fn_ln
## 1      Gautier Calomne
## 2     Michel Corthouts
## 3 Vincent Van Peteghem</code></pre>
<p>They just enter the parliament at date_1, that is easy, but there is more information in the remarks. Easy part first (EPF), low hanging fruits, quick impacts and what have you.</p>
<pre class="r"><code>vervangt &lt;- two_dates %&gt;% 
  filter(first_word == &quot;Vervangt&quot;) %&gt;% 
  mutate(start_date = date_1)

two_dates &lt;- two_dates %&gt;% 
  filter(first_word != &quot;Vervangt&quot;) %&gt;%
  rbind(vervangt)</code></pre>
<p>Those with ‚Äúwerd‚Äù were replaced during a period, so end_date is date_1-1 for their first period, and date_2+1 is the start date of their second period.</p>
<pre class="r"><code>werd_1 &lt;- two_dates %&gt;% 
  filter(first_word == &quot;Werd&quot;) %&gt;% 
  mutate(end_date = ymd(date_1) - days(1))

werd_2 &lt;- two_dates %&gt;% 
  filter(first_word == &quot;Werd&quot;) %&gt;% 
  mutate(start_date = ymd(date_2) + days(1))

werd &lt;- rbind(werd_1, werd_2)

two_dates &lt;- two_dates %&gt;%
  filter(first_word != &quot;Werd&quot;) %&gt;%
  rbind(werd)</code></pre>
<p>Those with ‚ÄúZetelt‚Äù (seats) changed parties twice. First became independent (from NV&amp;A), then created a new party ‚ÄúVuye&amp;Wouters‚Äù.
Mr Hendrik Vuye tweets a lot.</p>
<pre class="r"><code>zetelt&lt;- two_dates %&gt;% 
  filter(first_word == &quot;Zetelt&quot;) 

zetelt$Opmerkingen</code></pre>
<pre><code>## [1] &quot;Zetelt van 22 9 tot 27 10 2016 als onafhankelijke en vanaf 27 10 2016 in de Vuye&amp;Wouters-fractie.&quot;  
## [2] &quot;Zetelt vanaf 22 9 tot 27 10 2016 als onafhankelijke en vanaf 27 10 2016 in de Vuye&amp;Wouters-fractie.&quot;</code></pre>
<pre class="r"><code>nva &lt;- zetelt %&gt;% 
  mutate(Fractie = &quot;NV&amp;A&quot;,
         end_date = ymd(date_1) - days(1))
onaf &lt;- zetelt %&gt;% 
  mutate(Fractie = &quot;ONAFH&quot;,
         start_date = date_1,
         end_date = date_2)
vuye &lt;- zetelt %&gt;% 
  mutate(Fractie = &quot;Vuye&amp;Wouters&quot;,
         start_date = ymd(date_2) + days(1))

two_dates&lt;- two_dates %&gt;% 
  filter(first_word != &quot;Zetelt&quot;) %&gt;% 
  rbind(nva) %&gt;% 
  rbind(onaf) %&gt;% 
  rbind(vuye)</code></pre>
<p>We need to go back to the comments with one days. They indicate the end date of a number of people and in particular of mayors or members of the government.</p>
<pre class="r"><code>one_date %&gt;% 
  filter(first_word == &quot;Vervangt&quot;) %&gt;% 
  select(Opmerkingen)</code></pre>
<pre><code>##                                                                                                 Opmerkingen
## 1                     Vervangt vanaf 13 12 2017 Ann Vanheste, die voltijds burgemeester van De Panne wordt.
## 2                         Vervangt vanaf 9 11 2017 Willy Demeyer, die voltijds burgemeester van Luik wordt.
## 3         Vervangt vanaf 30 7 2014 C√©line Fremault, die minister in de Brusselse regering-Vervoort II wordt
## 4  Vervangt vanaf 6 12 2018 Sabien Lahaye-Battheu, die gedeputeerde van de provincie West-Vlaanderen wordt.
## 5                        Vervangt vanaf 23 4 2015 Melchior Wathelet, die actief wordt in het bedrijfsleven.
## 6           Vervangt vanaf 14 10 2014 Alexander De Croo, die minister in de federale regering-Michel I werd
## 7                Vervangt vanaf 24 8 2017 Denis Ducarme, die minister in de federale Regering-Michel I werd
## 8                                      Vervangt vanaf 20 9 2018 Isabelle Poncelet, die de politiek verlaat.
## 9          Vervangt vanaf 14 10 2014 Daniel Bacquelaine, die minister in de federale regering-Michel I werd
## 10                  Vervangt vanaf 24 5 2018 Eric Massin, die voltijds OCMW-voorzitter van Charleroi wordt.
## 11            Vervangt vanaf 14 10 2014 Maggie De Block, die minister in de federale regering-Michel I werd
## 12              Vervangt vanaf 12 1 2017 Johan Vande Lanotte, die voltijds burgemeester van Oostende wordt.
## 13    Vervangt vanaf 14 10 2014 Marie-Christine Marghem, die minister in de federale regering-Michel I werd
## 14                                 Vervangt vanaf 19 6 2014 Marijke Dillen, die beslist om niet te zetelen.
## 15    Vervangt vanaf 18 10 2018 Muriel Gerkens, die zich kandidaat stelt bij de provincieraadsverkiezingen.
## 16             Vervangt vanaf 14 10 2014 Charles Michel, die minister in de federale regering-Michel I werd
## 17                           Vervangt vanaf 28 5 2015 Zakia Khattabi, die partijvoorzitter van Ecolo wordt.
## 18                 Vervangt vanaf 14 10 2014 Koen Geens, die minister in de federale regering-Michel I werd
## 19                                 Vervangt vanaf 6 12 2018 Benoit Hellings, die schepen van Brussel wordt.</code></pre>
<p>We could use a regex to extract between the last digit and the ,
But regexps are always more difficult than they seem. So here it is just easier to use ‚Äòsubstr‚Äô.</p>
<pre class="r"><code>str_locate(one_date$Opmerkingen[10], &quot;201&quot;)[2]+3</code></pre>
<pre><code>## [1] 26</code></pre>
<pre class="r"><code>str_locate(one_date$Opmerkingen[10], &quot;,&quot;)[1]-1</code></pre>
<pre><code>## [1] 42</code></pre>
<pre class="r"><code>substr(one_date$Opmerkingen[10], 26, 42)</code></pre>
<pre><code>## [1] &quot;Melchior Wathelet&quot;</code></pre>
<pre class="r"><code>end_dates &lt;- one_date %&gt;% 
  select(date_1, Opmerkingen, first_word) %&gt;% 
  filter(first_word == &quot;Vervangt&quot;) %&gt;%
  mutate(fn_ln = substr(Opmerkingen,
                                str_locate(Opmerkingen, &quot;201&quot;)[,2]+3,
                                str_locate(Opmerkingen, &quot;,&quot;)[,1]-1)) %&gt;% 
  select(-Opmerkingen, -first_word, )

end_dates$fn_ln</code></pre>
<pre><code>##  [1] &quot;Ann Vanheste&quot;            &quot;Willy Demeyer&quot;          
##  [3] &quot;C√©line Fremault&quot;         &quot;Sabien Lahaye-Battheu&quot;  
##  [5] &quot;Melchior Wathelet&quot;       &quot;Alexander De Croo&quot;      
##  [7] &quot;Denis Ducarme&quot;           &quot;Isabelle Poncelet&quot;      
##  [9] &quot;Daniel Bacquelaine&quot;      &quot;Eric Massin&quot;            
## [11] &quot;Maggie De Block&quot;         &quot;Johan Vande Lanotte&quot;    
## [13] &quot;Marie-Christine Marghem&quot; &quot;Marijke Dillen&quot;         
## [15] &quot;Muriel Gerkens&quot;          &quot;Charles Michel&quot;         
## [17] &quot;Zakia Khattabi&quot;          &quot;Koen Geens&quot;             
## [19] &quot;Benoit Hellings&quot;</code></pre>
<pre class="r"><code>new_end &lt;- reps54 %&gt;%
  filter(fn_ln %in% end_dates$fn_ln)

setdiff(end_dates$fn_ln,new_end$fn_ln)</code></pre>
<pre><code>## [1] &quot;Marijke Dillen&quot;</code></pre>
<p>So we do not have <a href="https://nl.wikipedia.org/wiki/Marijke_Dillen">that</a> nice young lady because she decided not to go to parliament and gave her seat to the fine young gentleman Jan Penris</p>
<pre class="r"><code>to_replace &lt;- new_end %&gt;% 
  left_join(end_dates,  by = c(&quot;fn_ln&quot;)) %&gt;% 
  mutate(end_date = date_1.y) %&gt;% 
  select(-date_1.y) %&gt;% 
  rename(&quot;date_1&quot; = &quot;date_1.x&quot;)

reps54&lt;-  reps54 %&gt;%
  filter(!fn_ln %in% end_dates$fn_ln) %&gt;% 
  rbind(to_replace)</code></pre>
<p>We can do the same with the comments within ‚Äòtwo_dates‚Äô</p>
<pre class="r"><code>two_dates %&gt;% 
  filter(first_word == &quot;Vervangt&quot;) %&gt;% 
  select(Opmerkingen)</code></pre>
<pre><code>##                                                                                                                                                                                                                                                    Opmerkingen
## 1                                                            Vervangt vanaf 22 9 2015 Sophie Wilm√®s, die minister wordt in de federale regering-Michel I. Wilm√®s zelf verving vanaf 11 10 2014 Didier Reynders, die ook minister in de regering-Michel I werd.
## 2 Vervangt vanaf 4 10 2018 St√©phane Crusni√®re, die financieel en administratief directeur van de R√©gie Communale Autonome van Waver wordt. Crusni√®re verving vanaf 30 7 2014 Andr√© Flahaut, die minister in de regering-Demotte III (Franse Gemeenschap) werd.
## 3                                        Vervangt vanaf 10 11 2016 Sarah Claerhout, die uit CD&amp;V stapt en haar zetel aan haar partij teruggeeft. Claerhout zelf verving 14 10 2014 Pieter De Crem, die staatssecretaris in de federale regering-Michel I werd.</code></pre>
<p>So here we have for instance Mrs Wilm√®s who is being replaced on 22/09/2015, but who replaced Mr Reynders on 11/10/2014.</p>
<pre class="r"><code>end_dates_two &lt;- two_dates %&gt;% 
  select(date_1, Opmerkingen, first_word) %&gt;% 
  filter(first_word == &quot;Vervangt&quot;) %&gt;%
  mutate(fn_ln = substr(Opmerkingen,
                                str_locate(Opmerkingen, &quot;201&quot;)[,2]+3,
                                str_locate(Opmerkingen, &quot;,&quot;)[,1]-1)) %&gt;% 
  select(-Opmerkingen, -first_word, )

end_dates_two$fn_ln</code></pre>
<pre><code>## [1] &quot;Sophie Wilm√®s&quot;      &quot;St√©phane Crusni√®re&quot; &quot;Sarah Claerhout&quot;</code></pre>
<pre class="r"><code>to_replace_two &lt;- reps54 %&gt;%
  filter(fn_ln %in% end_dates_two$fn_ln) %&gt;%
  left_join(end_dates_two,  by = c(&quot;fn_ln&quot;)) %&gt;% 
  mutate(end_date = date_1.y) %&gt;% 
  select(-date_1.y) %&gt;% 
  rename(&quot;date_1&quot; = &quot;date_1.x&quot;)

reps54 &lt;-  reps54 %&gt;%
  filter(!fn_ln %in% end_dates_two$fn_ln) %&gt;%
  rbind(to_replace_two)</code></pre>
<p>And then the last three replacements for the end dates of Mr De Crem, Reynders and Flahaut.</p>
<pre class="r"><code>end_dates_three &lt;- two_dates %&gt;% 
  select(date_2, Opmerkingen, first_word) %&gt;% 
  filter(first_word == &quot;Vervangt&quot;) %&gt;%
  mutate(Opmerkingen = substr(Opmerkingen,str_locate(Opmerkingen, &quot;,&quot;)[,1]+3, 100000))%&gt;% 
  mutate(fn_ln = substr(Opmerkingen,
                                str_locate(Opmerkingen, &quot;201&quot;)[,2]+3,
                                str_locate(Opmerkingen, &quot;,&quot;)[,1]-1)) %&gt;% 
  select(-Opmerkingen, -first_word, )

end_dates_three$fn_ln</code></pre>
<pre><code>## [1] &quot;Didier Reynders&quot; &quot;Andr√© Flahaut&quot;   &quot;Pieter De Crem&quot;</code></pre>
<pre class="r"><code>to_replace_three &lt;- reps54 %&gt;%
  filter(fn_ln %in% end_dates_three$fn_ln) %&gt;%
  left_join(end_dates_three,  by = c(&quot;fn_ln&quot;)) %&gt;% 
  mutate(end_date = date_2.y) %&gt;% 
  select(-date_2.y) %&gt;% 
  rename(&quot;date_2&quot; = &quot;date_2.x&quot;)

reps54 &lt;-  reps54 %&gt;%
  filter(!fn_ln %in% end_dates_three$fn_ln) %&gt;%
  rbind(to_replace_three)</code></pre>
<p>Starting to see the end of the tunnel. Still need to arrange the case of Mrs Turtelboom and Mr Frank Wilrycx.</p>
<pre class="r"><code>reps54 %&gt;% 
  filter(fn_ln == &quot;Frank Wilrycx&quot;) %&gt;% 
  select(Opmerkingen)</code></pre>
<pre><code>##                                                                                                                                                                                               Opmerkingen
## 1 Vervangt sinds 3 5 2018 Annemie Turtelboom, die lid wordt van de Europese Rekenkamer. Eerder verving hij van 30 7 2014 tot 29 4 2016 Turtelboom toen die minister was in de Vlaamse Regering-Bourgeois.</code></pre>
<pre class="r"><code>dates &lt;- reps54 %&gt;% 
  filter(fn_ln == &quot;Frank Wilrycx&quot;) %&gt;% 
  select(date_1, date_2, date_3)
dates</code></pre>
<pre><code>##       date_1     date_2     date_3
## 1 2018-05-03 2014-07-30 2016-04-29</code></pre>
<pre class="r"><code>three_dates &lt;- reps54 %&gt;% 
  filter(fn_ln == &quot;Frank Wilrycx&quot;) %&gt;% 
  mutate(start_date = dates$date_2) %&gt;% 
  mutate(end_date = dates$date_3) %&gt;% 
  rbind(reps54 %&gt;% filter(fn_ln == &quot;Frank Wilrycx&quot;) %&gt;% 
        mutate(start_date = dates$date_1)) %&gt;% 
  rbind(reps54 %&gt;% filter(fn_ln == &quot;Annemie Turtelboom&quot;) %&gt;% 
          mutate(end_date = ymd(dates$date_2) - days(1))) %&gt;% 
  rbind(reps54 %&gt;% filter(fn_ln == &quot;Annemie Turtelboom&quot;) %&gt;% 
          mutate(start_date = ymd(dates$date_3) + days(1)) %&gt;% 
          mutate(end_date = ymd(dates$date_1) - days(1)))</code></pre>
<p>So let‚Äôs bring them all together before tackling missing values.</p>
<pre class="r"><code>dim(one_date)</code></pre>
<pre><code>## [1] 26 19</code></pre>
<pre class="r"><code>dim(two_dates)</code></pre>
<pre><code>## [1] 18 19</code></pre>
<pre class="r"><code>dim(three_dates)</code></pre>
<pre><code>## [1]  4 19</code></pre>
<pre class="r"><code>dim(reps54)</code></pre>
<pre><code>## [1] 182  19</code></pre>
<pre class="r"><code>length(unique(reps54$fn_ln))</code></pre>
<pre><code>## [1] 179</code></pre>
<pre class="r"><code>reps54 &lt;- reps54 %&gt;% 
  filter(!fn_ln %in% one_date) %&gt;% 
  filter(!fn_ln %in% two_dates) %&gt;% 
  filter(!fn_ln %in% three_dates) %&gt;% 
  rbind(one_date) %&gt;% 
  rbind(two_dates) %&gt;% 
  rbind(three_dates) %&gt;% 
  mutate(fn_ln = trimws(fn_ln, c(&quot;both&quot;)))

length(unique(reps54$fn_ln))</code></pre>
<pre><code>## [1] 179</code></pre>
<pre class="r"><code>length(reps54$fn_ln)</code></pre>
<pre><code>## [1] 230</code></pre>
<p>Save before cleaning.</p>
<pre class="r"><code>saveRDS(reps54, &quot;./data/20190503/reps54_before_cleaning.rds&quot;)</code></pre>
<pre class="r"><code>empty_spaces &lt;- reps54 %&gt;% 
  filter(is.na(language)) %&gt;% 
  arrange(fn_ln)</code></pre>
<pre class="r"><code>empty_spaces$ln_fn</code></pre>
<pre><code>##   [1] &quot;Laaouej Ahmed&quot;             &quot;Mathot Alain&quot;             
##   [3] &quot;Top Alain&quot;                 &quot;Carcaci Aldo&quot;             
##   [5] &quot;De Croo Alexander&quot;         &quot;Capoen An&quot;                
##   [7] &quot;Flahaut Andr√©&quot;             &quot;Fr√©d√©ric Andr√©&quot;           
##   [9] &quot;Vanheste Ann&quot;              &quot;Goffinet Anne-Catherine&quot;  
##  [11] &quot;Goffinet Anne-Catherine&quot;   &quot;Dedry Anne&quot;               
##  [13] &quot;Turtelboom Annemie&quot;        &quot;Turtelboom Annemie&quot;       
##  [15] &quot;Turtelboom Annemie&quot;        &quot;Lambrecht Annick&quot;         
##  [17] &quot;Lambrecht Annick&quot;          &quot;Pas Barbara&quot;              
##  [19] &quot;De Wever Bart&quot;             &quot;Dispa Beno√Æt&quot;             
##  [21] &quot;Friart Beno√Æt&quot;             &quot;Hellings Benoit&quot;          
##  [23] &quot;Lutgen Beno√Æt&quot;             &quot;Piedboeuf Beno√Æt&quot;         
##  [25] &quot;Wollants Bert&quot;             &quot;Vermeulen Brecht&quot;         
##  [27] &quot;Van Cauter Carina&quot;         &quot;Cassart-Mailleux Caroline&quot;
##  [29] &quot;Fonck Catherine&quot;           &quot;Fremault C√©line&quot;          
##  [31] &quot;Michel Charles&quot;            &quot;Brotcorne Christian&quot;      
##  [33] &quot;D&#39;Haese Christoph&quot;         &quot;Thi√©ry Damien&quot;            
##  [35] &quot;Bacquelaine Daniel&quot;        &quot;Senesael Daniel&quot;          
##  [37] &quot;Dumery Daphn√©&quot;             &quot;Clarinval David&quot;          
##  [39] &quot;Geerts David&quot;              &quot;Ducarme Denis&quot;            
##  [41] &quot;Reynders Didier&quot;           &quot;Janssens Dirk&quot;            
##  [43] &quot;Janssens Dirk&quot;             &quot;Van der Maelen Dirk&quot;      
##  [45] &quot;Van Mechelen Dirk&quot;         &quot;Lachaert Egbert&quot;          
##  [47] &quot;Di Rupo Elio&quot;              &quot;Van Hoof Els&quot;             
##  [49] &quot;Van Hoof Els&quot;              &quot;Kir Emir&quot;                 
##  [51] &quot;Burton Emmanuel&quot;           &quot;Massin Eric&quot;              
##  [53] &quot;Thi√©baut Eric&quot;             &quot;Van Rompuy Eric&quot;          
##  [55] &quot;Willaert Evita&quot;            &quot;Winckel Fabienne&quot;         
##  [57] &quot;Pehlivan Fatma&quot;            &quot;Dewinter Filip&quot;           
##  [59] &quot;Delp√©r√©e Francis&quot;          &quot;Schepmans Fran√ßoise&quot;      
##  [61] &quot;Wilrycx Frank&quot;             &quot;Wilrycx Frank&quot;            
##  [63] &quot;Wilrycx Frank&quot;             &quot;Demon Franky&quot;             
##  [65] &quot;Daerden Fr√©d√©ric&quot;          &quot;Calomne Gautier&quot;          
##  [67] &quot;Calomne Gautier&quot;           &quot;Dallemagne Georges&quot;       
##  [69] &quot;Dallemagne Georges&quot;        &quot;Gilkinet Georges&quot;         
##  [71] &quot;Foret Gilles&quot;              &quot;Vanden Burre Gilles&quot;      
##  [73] &quot;Vanden Burre Gilles&quot;       &quot;Uyttersprot Goedele&quot;      
##  [75] &quot;Smaers Griet&quot;              &quot;Grovonius Gwena√´lle&quot;      
##  [77] &quot;Bonte Hans&quot;                &quot;Bogaert Hendrik&quot;          
##  [79] &quot;Vuye Hendrik&quot;              &quot;Vuye Hendrik&quot;             
##  [81] &quot;Vuye Hendrik&quot;              &quot;Vuye Hendrik&quot;             
##  [83] &quot;Somers Ine&quot;                &quot;De Coninck Inez&quot;          
##  [85] &quot;Galant Isabelle&quot;           &quot;Galant Isabelle&quot;          
##  [87] &quot;Poncelet Isabelle&quot;         &quot;Chabot Jacques&quot;           
##  [89] &quot;Chabot Jacques&quot;            &quot;Jambon Jan&quot;               
##  [91] &quot;Jambon Jan&quot;                &quot;Jambon Jan&quot;               
##  [93] &quot;Penris Jan&quot;                &quot;Penris Jan&quot;               
##  [95] &quot;Spooren Jan&quot;               &quot;Vercammen Jan&quot;            
##  [97] &quot;Flahaux Jean-Jacques&quot;      &quot;Deliz√©e Jean-Marc&quot;        
##  [99] &quot;Nollet Jean-Marc&quot;          &quot;Van den Bergh Jef&quot;        
## [101] &quot;Klaps Johan&quot;               &quot;Vande Lanotte Johan&quot;      
## [103] &quot;Fernandez Fernandez Julie&quot; &quot;Jirofl√©e Karin&quot;           
## [105] &quot;Temmerman Karin&quot;           &quot;Lalieux Karine&quot;           
## [107] &quot;Grosemans Karolien&quot;        &quot;Gabri√´ls Katja&quot;           
## [109] &quot;Gabri√´ls Katja&quot;            &quot;Jadin Kattrin&quot;            
## [111] &quot;Geens Koen&quot;                &quot;Metsu Koen&quot;               
## [113] &quot;Degroote Koenraad&quot;         &quot;Van Vaerenbergh Kristien&quot; 
## [115] &quot;Calvo Kristof&quot;             &quot;Devin Laurent&quot;            
## [117] &quot;Onkelinx Laurette&quot;         &quot;Dierick Leen&quot;             
## [119] &quot;Gustin Luc&quot;                &quot;Gustin Luc&quot;               
## [121] &quot;Van Biesen Luk&quot;            &quot;De Block Maggie&quot;          
## [123] &quot;Cheron Marcel&quot;             &quot;Van Hees Marco&quot;           
## [125] &quot;Marghem Marie-Christine&quot;   &quot;Deti√®ge Maya&quot;             
## [127] &quot;Wathelet Melchior&quot;         &quot;Kitir Meryame&quot;            
## [129] &quot;Almaci Meyrem&quot;             &quot;Corthouts Michel&quot;         
## [131] &quot;Corthouts Michel&quot;          &quot;de Lamotte Michel&quot;        
## [133] &quot;de Lamotte Michel&quot;         &quot;De Coninck Monica&quot;        
## [135] &quot;Gerkens Muriel&quot;            &quot;Lanjri Nahima&quot;            
## [137] &quot;Muylle Nathalie&quot;           &quot;Ben Hamou Nawal&quot;          
## [139] &quot;Lijnen Nele&quot;               &quot;Chastel Olivier&quot;          
## [141] &quot;Henry Olivier&quot;             &quot;Henry Olivier&quot;            
## [143] &quot;Maingain Olivier&quot;          &quot;Maingain Olivier&quot;         
## [145] &quot;Maingain Olivier&quot;          &quot;Maingain Olivier&quot;         
## [147] &quot;√ñzen √ñzlem&quot;                &quot;Ceysens Patricia&quot;         
## [149] &quot;Dewael Patrick&quot;            &quot;Dewael Patrick&quot;           
## [151] &quot;Delannois Paul-Olivier&quot;    &quot;Buysrogge Peter&quot;          
## [153] &quot;De Roover Peter&quot;           &quot;Dedecker Peter&quot;           
## [155] &quot;Luykx Peter&quot;               &quot;Vanvelthoven Peter&quot;       
## [157] &quot;Blanchart Philippe&quot;        &quot;Goffin Philippe&quot;          
## [159] &quot;Pivin Philippe&quot;            &quot;De Crem Pieter&quot;           
## [161] &quot;Terwingen Raf&quot;             &quot;Hedebouw Raoul&quot;           
## [163] &quot;Hufkens Renate&quot;            &quot;Miller Richard&quot;           
## [165] &quot;Miller Richard&quot;            &quot;Bellens Rita&quot;             
## [167] &quot;Gantois Rita&quot;              &quot;Van de Velde Robert&quot;      
## [169] &quot;Deseyn Roel&quot;               &quot;Lahaye-Battheu Sabien&quot;    
## [171] &quot;De Crom Sandrine&quot;          &quot;De Crom Sandrine&quot;         
## [173] &quot;Claerhout Sarah&quot;           &quot;Schlitz Sarah&quot;            
## [175] &quot;Schlitz Sarah&quot;             &quot;Smeyers Sarah&quot;            
## [177] &quot;Pirlot S√©bastian&quot;          &quot;Verherstraeten Servais&quot;   
## [179] &quot;Bracke Siegfried&quot;          &quot;Bracke Siegfried&quot;         
## [181] &quot;Becq Sonja&quot;                &quot;De Wit Sophie&quot;            
## [183] &quot;Wilm√®s Sophie&quot;             &quot;Van Hecke Stefaan&quot;        
## [185] &quot;Vercamer Stefaan&quot;          &quot;Crusni√®re St√©phane&quot;       
## [187] &quot;Thoron St√©phanie&quot;          &quot;Vandeput Steven&quot;          
## [189] &quot;Vandeput Steven&quot;           &quot;Vandeput Steven&quot;          
## [191] &quot;de Coster-Bauchau Sybille&quot; &quot;Francken Theo&quot;            
## [193] &quot;Francken Theo&quot;             &quot;Francken Theo&quot;            
## [195] &quot;Vandenput Tim&quot;             &quot;Van Peel Valerie&quot;         
## [197] &quot;Matz Vanessa&quot;              &quot;Heeren Veerle&quot;            
## [199] &quot;Wouters Veerle&quot;            &quot;Wouters Veerle&quot;           
## [201] &quot;Wouters Veerle&quot;            &quot;Wouters Veerle&quot;           
## [203] &quot;Y√ºksel Veli&quot;               &quot;Y√ºksel Veli&quot;              
## [205] &quot;Y√ºksel Veli&quot;               &quot;Y√ºksel Veli&quot;              
## [207] &quot;Caprasse V√©ronique&quot;        &quot;Caprasse V√©ronique&quot;       
## [209] &quot;Caprasse V√©ronique&quot;        &quot;Caprasse V√©ronique&quot;       
## [211] &quot;Waterschoot V√©ronique&quot;     &quot;Waterschoot V√©ronique&quot;    
## [213] &quot;Scourneau Vincent&quot;         &quot;Scourneau Vincent&quot;        
## [215] &quot;Van Peteghem Vincent&quot;      &quot;Van Peteghem Vincent&quot;     
## [217] &quot;Van Quickenborne Vincent&quot;  &quot;Janssen Werner&quot;           
## [219] &quot;Demeyer Willy&quot;             &quot;Van der Donckt Wim&quot;       
## [221] &quot;Beke Wouter&quot;               &quot;De Vriendt Wouter&quot;        
## [223] &quot;Raskin Wouter&quot;             &quot;Van Camp Yoleen&quot;          
## [225] &quot;Casier Youro&quot;              &quot;Casier Youro&quot;             
## [227] &quot;Khattabi Zakia&quot;            &quot;Demir Zuhal&quot;              
## [229] &quot;Demir Zuhal&quot;               &quot;Demir Zuhal&quot;</code></pre>
<p>For now I leave some fields incomplete and see if we can have fun finding them with algorithms or with some other tools. But since we have a number of their tweets in ram, we kan have a shot at guessing their language ‚Äòrole‚Äô.</p>
<p>On the other hand if you are familiar with Belgium, you could just make good guesses looking at their first names:</p>
<pre class="r"><code>word(empty_spaces$ln_fn,-1)</code></pre>
<pre><code>##   [1] &quot;Ahmed&quot;           &quot;Alain&quot;           &quot;Alain&quot;          
##   [4] &quot;Aldo&quot;            &quot;Alexander&quot;       &quot;An&quot;             
##   [7] &quot;Andr√©&quot;           &quot;Andr√©&quot;           &quot;Ann&quot;            
##  [10] &quot;Anne-Catherine&quot;  &quot;Anne-Catherine&quot;  &quot;Anne&quot;           
##  [13] &quot;Annemie&quot;         &quot;Annemie&quot;         &quot;Annemie&quot;        
##  [16] &quot;Annick&quot;          &quot;Annick&quot;          &quot;Barbara&quot;        
##  [19] &quot;Bart&quot;            &quot;Beno√Æt&quot;          &quot;Beno√Æt&quot;         
##  [22] &quot;Benoit&quot;          &quot;Beno√Æt&quot;          &quot;Beno√Æt&quot;         
##  [25] &quot;Bert&quot;            &quot;Brecht&quot;          &quot;Carina&quot;         
##  [28] &quot;Caroline&quot;        &quot;Catherine&quot;       &quot;C√©line&quot;         
##  [31] &quot;Charles&quot;         &quot;Christian&quot;       &quot;Christoph&quot;      
##  [34] &quot;Damien&quot;          &quot;Daniel&quot;          &quot;Daniel&quot;         
##  [37] &quot;Daphn√©&quot;          &quot;David&quot;           &quot;David&quot;          
##  [40] &quot;Denis&quot;           &quot;Didier&quot;          &quot;Dirk&quot;           
##  [43] &quot;Dirk&quot;            &quot;Dirk&quot;            &quot;Dirk&quot;           
##  [46] &quot;Egbert&quot;          &quot;Elio&quot;            &quot;Els&quot;            
##  [49] &quot;Els&quot;             &quot;Emir&quot;            &quot;Emmanuel&quot;       
##  [52] &quot;Eric&quot;            &quot;Eric&quot;            &quot;Eric&quot;           
##  [55] &quot;Evita&quot;           &quot;Fabienne&quot;        &quot;Fatma&quot;          
##  [58] &quot;Filip&quot;           &quot;Francis&quot;         &quot;Fran√ßoise&quot;      
##  [61] &quot;Frank&quot;           &quot;Frank&quot;           &quot;Frank&quot;          
##  [64] &quot;Franky&quot;          &quot;Fr√©d√©ric&quot;        &quot;Gautier&quot;        
##  [67] &quot;Gautier&quot;         &quot;Georges&quot;         &quot;Georges&quot;        
##  [70] &quot;Georges&quot;         &quot;Gilles&quot;          &quot;Gilles&quot;         
##  [73] &quot;Gilles&quot;          &quot;Goedele&quot;         &quot;Griet&quot;          
##  [76] &quot;Gwena√´lle&quot;       &quot;Hans&quot;            &quot;Hendrik&quot;        
##  [79] &quot;Hendrik&quot;         &quot;Hendrik&quot;         &quot;Hendrik&quot;        
##  [82] &quot;Hendrik&quot;         &quot;Ine&quot;             &quot;Inez&quot;           
##  [85] &quot;Isabelle&quot;        &quot;Isabelle&quot;        &quot;Isabelle&quot;       
##  [88] &quot;Jacques&quot;         &quot;Jacques&quot;         &quot;Jan&quot;            
##  [91] &quot;Jan&quot;             &quot;Jan&quot;             &quot;Jan&quot;            
##  [94] &quot;Jan&quot;             &quot;Jan&quot;             &quot;Jan&quot;            
##  [97] &quot;Jean-Jacques&quot;    &quot;Jean-Marc&quot;       &quot;Jean-Marc&quot;      
## [100] &quot;Jef&quot;             &quot;Johan&quot;           &quot;Johan&quot;          
## [103] &quot;Julie&quot;           &quot;Karin&quot;           &quot;Karin&quot;          
## [106] &quot;Karine&quot;          &quot;Karolien&quot;        &quot;Katja&quot;          
## [109] &quot;Katja&quot;           &quot;Kattrin&quot;         &quot;Koen&quot;           
## [112] &quot;Koen&quot;            &quot;Koenraad&quot;        &quot;Kristien&quot;       
## [115] &quot;Kristof&quot;         &quot;Laurent&quot;         &quot;Laurette&quot;       
## [118] &quot;Leen&quot;            &quot;Luc&quot;             &quot;Luc&quot;            
## [121] &quot;Luk&quot;             &quot;Maggie&quot;          &quot;Marcel&quot;         
## [124] &quot;Marco&quot;           &quot;Marie-Christine&quot; &quot;Maya&quot;           
## [127] &quot;Melchior&quot;        &quot;Meryame&quot;         &quot;Meyrem&quot;         
## [130] &quot;Michel&quot;          &quot;Michel&quot;          &quot;Michel&quot;         
## [133] &quot;Michel&quot;          &quot;Monica&quot;          &quot;Muriel&quot;         
## [136] &quot;Nahima&quot;          &quot;Nathalie&quot;        &quot;Nawal&quot;          
## [139] &quot;Nele&quot;            &quot;Olivier&quot;         &quot;Olivier&quot;        
## [142] &quot;Olivier&quot;         &quot;Olivier&quot;         &quot;Olivier&quot;        
## [145] &quot;Olivier&quot;         &quot;Olivier&quot;         &quot;√ñzlem&quot;          
## [148] &quot;Patricia&quot;        &quot;Patrick&quot;         &quot;Patrick&quot;        
## [151] &quot;Paul-Olivier&quot;    &quot;Peter&quot;           &quot;Peter&quot;          
## [154] &quot;Peter&quot;           &quot;Peter&quot;           &quot;Peter&quot;          
## [157] &quot;Philippe&quot;        &quot;Philippe&quot;        &quot;Philippe&quot;       
## [160] &quot;Pieter&quot;          &quot;Raf&quot;             &quot;Raoul&quot;          
## [163] &quot;Renate&quot;          &quot;Richard&quot;         &quot;Richard&quot;        
## [166] &quot;Rita&quot;            &quot;Rita&quot;            &quot;Robert&quot;         
## [169] &quot;Roel&quot;            &quot;Sabien&quot;          &quot;Sandrine&quot;       
## [172] &quot;Sandrine&quot;        &quot;Sarah&quot;           &quot;Sarah&quot;          
## [175] &quot;Sarah&quot;           &quot;Sarah&quot;           &quot;S√©bastian&quot;      
## [178] &quot;Servais&quot;         &quot;Siegfried&quot;       &quot;Siegfried&quot;      
## [181] &quot;Sonja&quot;           &quot;Sophie&quot;          &quot;Sophie&quot;         
## [184] &quot;Stefaan&quot;         &quot;Stefaan&quot;         &quot;St√©phane&quot;       
## [187] &quot;St√©phanie&quot;       &quot;Steven&quot;          &quot;Steven&quot;         
## [190] &quot;Steven&quot;          &quot;Sybille&quot;         &quot;Theo&quot;           
## [193] &quot;Theo&quot;            &quot;Theo&quot;            &quot;Tim&quot;            
## [196] &quot;Valerie&quot;         &quot;Vanessa&quot;         &quot;Veerle&quot;         
## [199] &quot;Veerle&quot;          &quot;Veerle&quot;          &quot;Veerle&quot;         
## [202] &quot;Veerle&quot;          &quot;Veli&quot;            &quot;Veli&quot;           
## [205] &quot;Veli&quot;            &quot;Veli&quot;            &quot;V√©ronique&quot;      
## [208] &quot;V√©ronique&quot;       &quot;V√©ronique&quot;       &quot;V√©ronique&quot;      
## [211] &quot;V√©ronique&quot;       &quot;V√©ronique&quot;       &quot;Vincent&quot;        
## [214] &quot;Vincent&quot;         &quot;Vincent&quot;         &quot;Vincent&quot;        
## [217] &quot;Vincent&quot;         &quot;Werner&quot;          &quot;Willy&quot;          
## [220] &quot;Wim&quot;             &quot;Wouter&quot;          &quot;Wouter&quot;         
## [223] &quot;Wouter&quot;          &quot;Yoleen&quot;          &quot;Youro&quot;          
## [226] &quot;Youro&quot;           &quot;Zakia&quot;           &quot;Zuhal&quot;          
## [229] &quot;Zuhal&quot;           &quot;Zuhal&quot;</code></pre>
<p>But looking at the tweets:</p>
<pre class="r"><code>tweets &lt;- readRDS(&quot;~/R/blogs/content/post/data/20190503/tweets.rds&quot;)
lang &lt;- tweets %&gt;% 
  filter(ln_fn %in% empty_spaces$ln_fn) %&gt;% 
  select(ln_fn, lang) %&gt;% 
  group_by(ln_fn, lang) %&gt;% 
  summarise(count = n())</code></pre>
<pre class="r"><code># this code is sinfull, apologies to the tidyverse saints;
languages_used &lt;- lang %&gt;%
  group_by(ln_fn)%&gt;%
  summarise(m = max(count))%&gt;% 
  left_join(lang) %&gt;% 
  filter(m == count) %&gt;% 
  select(-m, -count) %&gt;% 
  mutate(language = ifelse(lang == &quot;nl&quot;, &quot;Nederlands&quot;, &quot;Frans&quot;)) %&gt;% 
  select(-lang)</code></pre>
<pre><code>## Joining, by = &quot;ln_fn&quot;</code></pre>
<pre class="r"><code>setdiff(empty_spaces$ln_fn, languages_used$ln_fn)</code></pre>
<pre><code>##  [1] &quot;Mathot Alain&quot;              &quot;Fr√©d√©ric Andr√©&quot;           
##  [3] &quot;Goffinet Anne-Catherine&quot;   &quot;Brotcorne Christian&quot;      
##  [5] &quot;D&#39;Haese Christoph&quot;         &quot;Van Rompuy Eric&quot;          
##  [7] &quot;Delp√©r√©e Francis&quot;          &quot;Wilrycx Frank&quot;            
##  [9] &quot;Bonte Hans&quot;                &quot;Galant Isabelle&quot;          
## [11] &quot;Vande Lanotte Johan&quot;       &quot;Devin Laurent&quot;            
## [13] &quot;Gustin Luc&quot;                &quot;Cheron Marcel&quot;            
## [15] &quot;Deti√®ge Maya&quot;              &quot;Gerkens Muriel&quot;           
## [17] &quot;Pivin Philippe&quot;            &quot;Van de Velde Robert&quot;      
## [19] &quot;Pirlot S√©bastian&quot;          &quot;de Coster-Bauchau Sybille&quot;</code></pre>
<p>So let‚Äôs add them and end this for now.</p>
<pre class="r"><code>to_add &lt;- data.frame(&quot;ln_fn&quot; = c(&quot;Vande Lanotte Johan&quot;,&quot;Gerkens Muriel&quot;), 
                     &quot;language&quot; = c(&quot;Nederlands&quot;, &quot;Frans&quot;)) 
languages_used &lt;-languages_used %&gt;% 
  rbind(to_add)

added_languages &lt;- empty_spaces %&gt;% 
  left_join(languages_used, by = c(&quot;ln_fn&quot;)) %&gt;% 
  mutate(language = language.y) %&gt;% 
  select(-language.x, -language.y)

reps54 &lt;- reps54 %&gt;% 
  filter(!is.na(language)) %&gt;% 
  rbind(added_languages) %&gt;% 
  arrange(fn_ln)</code></pre>
<p>Save after first cleaning.</p>
<pre class="r"><code>saveRDS(reps54, &quot;./data/20190503/reps54_after_cleaning.rds&quot;)</code></pre>
<p>I‚Äôll pick up the tweets analysis soon, but first want to show you some cool stuff using Rekognition from aws.</p>

      
      <div class="related">

<h3>Similar articles:</h3>
<ul>
	
	<li><a href="/post/belgian-parliamentarians-twitter-accounts/">Belgian parliamentarians Twitter accounts</a></li>
	
	<li><a href="/post/members-of-the-chamber-of-representatives-of-belgium-54th-legistlature/">members of the chamber of representatives of Belgium, 54th legistlature</a></li>
	
</ul>
</div>
      
    </div>
    
  </div>
</section>


<section class="section">
  <div class="container">
    <aside><div id="disqus_thread"></div></aside>
  
    <div id="show_comments"><a id="load_comments" class="button is-link">Load comments</a></div>
  
    <script type="text/javascript">
      var disqus_shortname = 'bad-to-the-code';
      function disqus() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      }
  
      
      var hash = window.location.hash.substr(1);
      if ((hash.length > 8) && (hash.substring(0, 8) === "comment-")) {
        disqus();
        document.getElementById("show_comments").style.display = "none";
      } else {
        document.getElementById('load_comments').onclick = function() {
          disqus();
          document.getElementById("show_comments").style.display = "none";
        };
      }
  

    </script>
    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
  </div>
</section>


<section class="section">
  <div class="container has-text-centered">
    <p>&copy; <a href="https://github.com/madcap1090">William Bourgeois</a> 2019</p>
    
      <p>Powered by <a href="https://gohugo.io/">Hugo</a> &amp; <a href="https://github.com/ribice/kiss">Kiss</a>.</p>
    
  </div>
</section>


<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-137981534-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>


<script type="text/javascript">
  var _paq = _paq || [];
  _paq.push(['trackPageView']);
  _paq.push(['enableLinkTracking']);
  (function() {
    var u="\/\/matomo.example.com\/";
    _paq.push(['setTrackerUrl', u+'piwik.php']);
    _paq.push(['setSiteId', '1']);
    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
    g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);
  })();
</script>
<noscript>
  <img src="//matomo.example.com/piwik.php?idsite=1&amp;rec=1" style="border:0" alt="" />
</noscript>


</body>
</html>

