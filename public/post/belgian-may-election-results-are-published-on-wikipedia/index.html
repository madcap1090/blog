<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"  lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1"/>

<title>Belgian May election results are published on Wikipedia | bad to the code</title>

<meta property='og:title' content='Belgian May election results are published on Wikipedia - bad to the code'>
<meta property='og:description' content='They say there is a Chinese curse that says ‘may you live in intersting times’. The results of the elections are in and they are, wel… interesting.
The part about ‘living in interesting times’ coming from China might however be fake.
The results of the federal parliamentarian elections have also been posted on Wikipedia. All the past results can also be found there, so the idea behind this post is to have an understanding of the evolution in Belgian politics through the evolution of the composition of the federal chamber.'>
<meta property='og:url' content='/post/belgian-may-election-results-are-published-on-wikipedia/'>
<meta property='og:site_name' content='bad to the code'>
<meta property='og:type' content='article'><meta property='og:image' content='https://www.gravatar.com/avatar/5f460ebf37e30791f47bb5be3de73e3a?s=256'><meta property='article:author' content='https://facebook.com/OClassicoOficial/videos/391802167961744/'><meta property='article:section' content='Post'><meta property='article:tag' content='scraping'><meta property='article:tag' content='gganimate'><meta property='article:tag' content='Belgian politics'><meta property='article:published_time' content='2019-06-06T00:00:00Z'/><meta property='article:modified_time' content='2019-06-06T00:00:00Z'/><meta name='twitter:card' content='summary'><meta name='twitter:site' content='@WilliamBourgeoi'><meta name='twitter:creator' content='@WilliamBourgeoi'>


<link href="/index.xml" rel="alternate" type="application/rss+xml" title="bad to the code" />

<link rel="stylesheet" href="/css/style.css"/><link rel='stylesheet' href='/css/custom.css'><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/site.webmanifest">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" content="#ffffff">
</head>
<body>
<section class="section">
  <div class="container">
    <nav class="nav">
      <div class="nav-left">
        <a class="nav-item" href="/">
          <h1 class="title is-4">bad to the code</h1>
        </a>
      </div>
      <div class="nav-right">
        <nav class="nav-item level is-mobile"><a class="level-item" aria-label="facebook" href='https://facebook.com/OClassicoOficial/videos/391802167961744/'
            target='_blank' rel='noopener'>
            <span class="icon">
              <i class><svg viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
    
    <path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"/>
    
  </svg></i>
            </span>
          </a><a class="level-item" aria-label="email" href='mailto:madcap1090@gmail.com'
            target='_blank' rel='noopener'>
            <span class="icon">
              <i class><svg viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
    
    <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>
    <polyline points="22,6 12,13 2,6"/>
    
  </svg></i>
            </span>
          </a><a class="level-item" aria-label="linkedin" href='https://linkedin.com/in/williambourgeois'
            target='_blank' rel='noopener'>
            <span class="icon">
              <i class><svg viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
    
    <path stroke-width="1.8" d="m5.839218,4.101561c0,1.211972 -0.974141,2.194011 -2.176459,2.194011s-2.176459,-0.982039 -2.176459,-2.194011c0,-1.211094 0.974141,-2.194011 2.176459,-2.194011s2.176459,0.982917 2.176459,2.194011zm0.017552,3.94922l-4.388022,0l0,14.04167l4.388022,0l0,-14.04167zm7.005038,0l-4.359939,0l0,14.04167l4.360816,0l0,-7.370999c0,-4.098413 5.291077,-4.433657 5.291077,0l0,7.370999l4.377491,0l0,-8.89101c0,-6.915523 -7.829986,-6.66365 -9.669445,-3.259423l0,-1.891237z"/>
    
  </svg></i>
            </span>
          </a><a class="level-item" aria-label="twitter" href='https://twitter.com/WilliamBourgeoi'
            target='_blank' rel='noopener'>
            <span class="icon">
              <i class><svg viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
    
    <path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"/>
    
  </svg></i>
            </span>
          </a><a class="level-item" aria-label="github" href='https://github.com/madcap1090'
            target='_blank' rel='noopener'>
            <span class="icon">
              <i class><svg viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
    
    <path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"/>
    
  </svg></i>
            </span>
          </a></nav>
      </div>
    </nav>

    <nav class="nav">
      

      
    </nav>

  </div>
</section>
<section class="section">
  <div class="container">
    <div class="subtitle tags is-6 is-pulled-right">
      
      
<a class="subtitle is-6" href="/tags/scraping">#scraping</a>



  
  | <a class="subtitle is-6" href="/tags/gganimate">#gganimate</a>
  
  | <a class="subtitle is-6" href="/tags/belgian-politics">#Belgian politics</a>
  

      
    </div>
    <h2 class="subtitle is-6">June 6, 2019</h2>
    <h1 class="title">Belgian May election results are published on Wikipedia</h1>
    
    <div class="content">
      


<p>They say there is a Chinese curse that says ‘may you live in intersting times’. The results of the elections are in and they are, wel… interesting.</p>
<p>The part about ‘living in interesting times’ coming from China might however be <a href="https://quoteinvestigator.com/2015/12/18/live/">fake</a>.</p>
<p>The results of the federal parliamentarian elections have also been posted on Wikipedia. All the past results can also be found there, so the idea behind this post is to have an understanding of the evolution in Belgian politics through the evolution of the composition of the federal chamber.</p>
<p>If you are interested, the detailed results of May 2019 can also be found on the official governemental <a href="https://verkiezingen2019.belgium.be%22">website</a>. I might get back to those, but Wikipedia seems to offer the best structural coherence for data in the past.</p>
<p>Attaching the libraries first:</p>
<pre class="r"><code>library(&quot;tidyverse&quot;)</code></pre>
<pre><code>## -- Attaching packages --------------------------------------------------------- tidyverse 1.2.1 --</code></pre>
<pre><code>## v ggplot2 3.1.1.9000     v purrr   0.3.1     
## v tibble  2.1.2          v dplyr   0.8.0.1   
## v tidyr   0.8.3          v stringr 1.4.0     
## v readr   1.3.1          v forcats 0.3.0</code></pre>
<pre><code>## -- Conflicts ------------------------------------------------------------ tidyverse_conflicts() --
## x dplyr::filter() masks stats::filter()
## x dplyr::lag()    masks stats::lag()</code></pre>
<pre class="r"><code>library(&quot;rvest&quot;)</code></pre>
<pre><code>## Loading required package: xml2</code></pre>
<pre><code>## 
## Attaching package: &#39;rvest&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:purrr&#39;:
## 
##     pluck</code></pre>
<pre><code>## The following object is masked from &#39;package:readr&#39;:
## 
##     guess_encoding</code></pre>
<pre class="r"><code>library(&quot;glue&quot;)</code></pre>
<pre><code>## 
## Attaching package: &#39;glue&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:dplyr&#39;:
## 
##     collapse</code></pre>
<pre class="r"><code>library(&quot;XML&quot;)</code></pre>
<pre><code>## 
## Attaching package: &#39;XML&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:rvest&#39;:
## 
##     xml</code></pre>
<pre class="r"><code>library(&quot;datapasta&quot;) #install.packages(&quot;datapasta&quot;)
library(&quot;directlabels&quot;)
library(&quot;gganimate&quot;)
library(&quot;ggthemes&quot;)</code></pre>
<p>At the very end of every relevant <a href="https://nl.wikipedia.org/wiki/Kamer_van_volksvertegenwoordigers_(samenstelling_2019-2024)">page</a> there are links to all the other relevant pages in the past. So I will get these links first.</p>
<pre class="r"><code>url &lt;- &quot;https://nl.wikipedia.org/wiki/Kamer_van_volksvertegenwoordigers_(samenstelling_2019-2024)&quot;

table &lt;- url %&gt;% 
  read_html() %&gt;% 
  html_nodes(&quot;#mw-content-text &gt; div &gt; div:nth-child(14) &gt; table &gt; tbody &gt; tr:nth-child(2) &gt; td &gt; table &gt; tbody &gt; tr:nth-child(1) &gt; td:nth-child(2)&quot;) 

see &lt;- table[[1]] 
data &lt;- xmlParse(see)
xml_data &lt;- xmlToList(data)
df &lt;- data.frame(matrix(unlist(xml_data), nrow=55, byrow=T)) 

names(df) &lt;- c(&quot;year&quot;, &quot;url&quot;, &quot;name&quot;, &quot;delete&quot;)  

df_url &lt;- df %&gt;% 
  select(-delete) %&gt;% 
  mutate(url = as.character(url))
df_url$url[55] &lt;- &quot;/wiki/Kamer_van_volksvertegenwoordigers_(samenstelling_2019-2024)&quot;

head(df_url)</code></pre>
<pre><code>##   year                                                               url
## 1 1831 /wiki/Kamer_van_volksvertegenwoordigers_(samenstelling_1831-1833)
## 2 1833 /wiki/Kamer_van_volksvertegenwoordigers_(samenstelling_1833-1837)
## 3 1837 /wiki/Kamer_van_volksvertegenwoordigers_(samenstelling_1837-1841)
## 4 1841 /wiki/Kamer_van_volksvertegenwoordigers_(samenstelling_1841-1845)
## 5 1845 /wiki/Kamer_van_volksvertegenwoordigers_(samenstelling_1845-1848)
## 6 1848 /wiki/Kamer_van_volksvertegenwoordigers_(samenstelling_1848-1852)
##                                                          name
## 1 Kamer van volksvertegenwoordigers (samenstelling 1831-1833)
## 2 Kamer van volksvertegenwoordigers (samenstelling 1833-1837)
## 3 Kamer van volksvertegenwoordigers (samenstelling 1837-1841)
## 4 Kamer van volksvertegenwoordigers (samenstelling 1841-1845)
## 5 Kamer van volksvertegenwoordigers (samenstelling 1845-1848)
## 6 Kamer van volksvertegenwoordigers (samenstelling 1848-1852)</code></pre>
<p>Done!</p>
<p>I found out that in this case, as in many, the best thing is to focus on the lowest granularity of the data. Here the individual members. This will yeald more information if we need it in the future. And here now concretely the ability to split the green fraction in a Flemish and French speaking part for easier comparison.</p>
<p>If you don’t know Belgian politics, consider yourself happy and just know that, on a national level, there are too many parties to start making any sense of evolutions, when plotting them together in a single graph.</p>
<p>The challange that the snippit below needs to address is that the Wikipedia pages all in all have a similar structures, but they still do vary from one election result to the other. The individual members of parliament are found in tables ranging from table 7 to 26.</p>
<p>So the tacktic below is to go through them and exit the loop when nothing is found, or when the result is not near the number of members of the chamber.</p>
<p>I’ll also start from 1977 onwards, for reasons you may know. If you don’t, you might not need to bother to find out. The geopolitics of energy resources, or the climate change to name but two are subjects worthier of your attention imho.</p>
<pre class="r"><code>results_seats &lt;- tibble() #empty for recieving info 

for (i in(40:55)) {
  print(i)
  
  for (j in c(7:26)) {
    print(j)
    
    url &lt;- df_url %&gt;%
      slice(i) %&gt;%
      select(url)
    
    url &lt;- paste0(&quot;https://nl.wikipedia.org/&quot;, url[, 1])
    
    table &lt;- as.character(url) %&gt;%
      read_html() %&gt;%
      html_nodes(glue(&quot;#mw-content-text &gt; div &gt; table:nth-child({j})&quot;)) %&gt;%
      html_table(fill = TRUE)
    
    see &lt;- try(see &lt;- table[[1]], silent = TRUE)
    
    if (class(see) == &quot;try-error&quot;)
      next
    if (nrow(see) &lt; 100)
      next
    if (nrow(see) &gt; 1000)
      next
    if (ncol(see) == 4)
    see &lt;- see %&gt;%  mutate(Taalgroep = &quot;no_data&quot;)
    
    year_start_end &lt;- str_extract_all(url, &quot;\\d+&quot;)[[1]]
    
    see &lt;- see %&gt;%
      mutate(start = year_start_end[1])
    
    if (&quot;Partij&quot; %in% colnames(see))
      see &lt;- see %&gt;% rename(&quot;Fractie&quot; = &quot;Partij&quot;)
    
    results_seats &lt;- rbind(results_seats, see)
  }
}</code></pre>
<pre><code>## [1] 40
## [1] 7
## [1] 8
## [1] 9
## [1] 10
## [1] 11
## [1] 12
## [1] 13
## [1] 14
## [1] 15
## [1] 16
## [1] 17
## [1] 18
## [1] 19
## [1] 20
## [1] 21
## [1] 22
## [1] 23
## [1] 24
## [1] 25
## [1] 26
## [1] 41
## [1] 7
## [1] 8
## [1] 9
## [1] 10
## [1] 11
## [1] 12
## [1] 13
## [1] 14
## [1] 15
## [1] 16
## [1] 17
## [1] 18
## [1] 19
## [1] 20
## [1] 21
## [1] 22
## [1] 23
## [1] 24
## [1] 25
## [1] 26
## [1] 42
## [1] 7
## [1] 8
## [1] 9
## [1] 10
## [1] 11
## [1] 12
## [1] 13
## [1] 14
## [1] 15
## [1] 16
## [1] 17
## [1] 18
## [1] 19
## [1] 20
## [1] 21
## [1] 22
## [1] 23
## [1] 24
## [1] 25
## [1] 26
## [1] 43
## [1] 7
## [1] 8
## [1] 9
## [1] 10
## [1] 11
## [1] 12
## [1] 13
## [1] 14
## [1] 15
## [1] 16
## [1] 17
## [1] 18
## [1] 19
## [1] 20
## [1] 21
## [1] 22
## [1] 23
## [1] 24
## [1] 25
## [1] 26
## [1] 44
## [1] 7
## [1] 8
## [1] 9
## [1] 10
## [1] 11
## [1] 12
## [1] 13
## [1] 14
## [1] 15
## [1] 16
## [1] 17
## [1] 18
## [1] 19
## [1] 20
## [1] 21
## [1] 22
## [1] 23
## [1] 24
## [1] 25
## [1] 26
## [1] 45
## [1] 7
## [1] 8
## [1] 9
## [1] 10
## [1] 11
## [1] 12
## [1] 13
## [1] 14
## [1] 15
## [1] 16
## [1] 17
## [1] 18
## [1] 19
## [1] 20
## [1] 21
## [1] 22
## [1] 23
## [1] 24
## [1] 25
## [1] 26
## [1] 46
## [1] 7
## [1] 8
## [1] 9
## [1] 10
## [1] 11
## [1] 12
## [1] 13
## [1] 14
## [1] 15
## [1] 16
## [1] 17
## [1] 18
## [1] 19
## [1] 20
## [1] 21
## [1] 22
## [1] 23
## [1] 24
## [1] 25
## [1] 26
## [1] 47
## [1] 7
## [1] 8
## [1] 9
## [1] 10
## [1] 11
## [1] 12
## [1] 13
## [1] 14
## [1] 15
## [1] 16
## [1] 17
## [1] 18
## [1] 19
## [1] 20
## [1] 21
## [1] 22
## [1] 23
## [1] 24
## [1] 25
## [1] 26
## [1] 48
## [1] 7
## [1] 8
## [1] 9
## [1] 10
## [1] 11
## [1] 12
## [1] 13
## [1] 14
## [1] 15
## [1] 16
## [1] 17
## [1] 18
## [1] 19
## [1] 20
## [1] 21
## [1] 22
## [1] 23
## [1] 24
## [1] 25
## [1] 26
## [1] 49
## [1] 7
## [1] 8
## [1] 9
## [1] 10
## [1] 11
## [1] 12
## [1] 13
## [1] 14
## [1] 15
## [1] 16
## [1] 17
## [1] 18
## [1] 19
## [1] 20
## [1] 21
## [1] 22
## [1] 23
## [1] 24
## [1] 25
## [1] 26
## [1] 50
## [1] 7
## [1] 8
## [1] 9
## [1] 10
## [1] 11
## [1] 12
## [1] 13
## [1] 14
## [1] 15
## [1] 16
## [1] 17
## [1] 18
## [1] 19
## [1] 20
## [1] 21
## [1] 22
## [1] 23
## [1] 24
## [1] 25
## [1] 26
## [1] 51
## [1] 7
## [1] 8
## [1] 9
## [1] 10
## [1] 11
## [1] 12
## [1] 13
## [1] 14
## [1] 15
## [1] 16
## [1] 17
## [1] 18
## [1] 19
## [1] 20
## [1] 21
## [1] 22
## [1] 23
## [1] 24
## [1] 25
## [1] 26
## [1] 52
## [1] 7
## [1] 8
## [1] 9
## [1] 10
## [1] 11
## [1] 12
## [1] 13
## [1] 14
## [1] 15
## [1] 16
## [1] 17
## [1] 18
## [1] 19
## [1] 20
## [1] 21
## [1] 22
## [1] 23
## [1] 24
## [1] 25
## [1] 26
## [1] 53
## [1] 7
## [1] 8
## [1] 9
## [1] 10
## [1] 11
## [1] 12
## [1] 13
## [1] 14
## [1] 15
## [1] 16
## [1] 17
## [1] 18
## [1] 19
## [1] 20
## [1] 21
## [1] 22
## [1] 23
## [1] 24
## [1] 25
## [1] 26
## [1] 54
## [1] 7
## [1] 8
## [1] 9
## [1] 10
## [1] 11
## [1] 12
## [1] 13
## [1] 14
## [1] 15
## [1] 16
## [1] 17
## [1] 18
## [1] 19
## [1] 20
## [1] 21
## [1] 22
## [1] 23
## [1] 24
## [1] 25
## [1] 26
## [1] 55
## [1] 7
## [1] 8
## [1] 9
## [1] 10
## [1] 11
## [1] 12
## [1] 13
## [1] 14
## [1] 15
## [1] 16
## [1] 17
## [1] 18
## [1] 19
## [1] 20
## [1] 21
## [1] 22
## [1] 23
## [1] 24
## [1] 25
## [1] 26</code></pre>
<pre class="r"><code>set.seed(42)
results_seats %&gt;%
  select(-Opmerkingen) %&gt;% 
  filter(start &gt; 1974) %&gt;% 
  sample_n(5)</code></pre>
<pre><code>##                         Volksvertegenwoordiger Fractie
## 1                       Gustin, Luc Luc Gustin      MR
## 2       Bacquelaine, Daniel Daniel Bacquelaine      MR
## 3           Van Rompaey, Hugo Hugo Van Rompaey     CVP
## 4 De Permentier, Corinne Corinne De Permentier      MR
## 5                     Barzin, Anne Anne Barzin     PRL
##                 Kieskring  Taalgroep start
## 1                    Luik      Frans  2014
## 2                    Luik      Frans  2019
## 3                Turnhout Nederlands  1985
## 4 Brussel-Halle-Vilvoorde      Frans  2010
## 5   Namen-Dinant-Philippe      Frans  1999</code></pre>
<p>Nice.</p>
<p>Save it for posterity.</p>
<pre class="r"><code>#saveRDS(results_seats, &quot;./data/20190606/results.rds&quot;)</code></pre>
<p>Since there were unified coalition lists and a number of party name changes, if we want to see an evolution over time we need to regroup political parties in some groups that have stability. That is what the code below is about.</p>
<pre class="r"><code>a &lt;- results_seats %&gt;%
  group_by(Fractie, Taalgroep, start) %&gt;% 
  summarise(count = n())

b &lt;- results_seats %&gt;% 
  group_by(start) %&gt;% 
  summarise(sum_seats = n())

c &lt;- a %&gt;% 
  left_join(b) %&gt;% 
  mutate(prc = count/sum_seats) %&gt;% 
  filter(start &gt; 1976) %&gt;% 
  mutate(family = case_when(Fractie == &quot;CVP&quot; ~ &quot;fl_chris_dem&quot;,
                            Fractie == &quot;CD&amp;V&quot; ~ &quot;fl_chris_dem&quot;,
                            Fractie == &quot;PVV&quot; ~ &quot;fl_lib_dem&quot;,
                            Fractie == &quot;VLD&quot; ~ &quot;fl_lib_dem&quot;,
                            Fractie == &quot;Open Vld&quot; ~ &quot;fl_lib_dem&quot;,
                            Fractie == &quot;Volksunie&quot; ~ &quot;fl_nat_dem&quot;,
                            Fractie == &quot;VU-ID&quot; ~ &quot;fl_nat_dem&quot;,
                            Fractie == &quot;N-VA&quot; ~ &quot;fl_nat_dem&quot;,
                            Fractie == &quot;CD&amp;V/N-VA&quot; ~ &quot;fl_chris_dem&quot;,
                            Fractie == &quot;Vlaams Blok&quot; ~ &quot;fl_nat&quot;,
                            Fractie == &quot;Vlaams Belang&quot; ~ &quot;fl_nat&quot;,
                            Fractie == &quot;BSP&quot; ~ &quot;fl_soc_dem&quot;,
                            Fractie == &quot;SP&quot; ~ &quot;fl_soc_dem&quot;,
                            Fractie == &quot;sp.a-Spirit&quot; ~ &quot;fl_soc_dem&quot;,
                            Fractie == &quot;sp.a&quot; ~ &quot;fl_soc_dem&quot;,
                            Fractie == &quot;Agalev&quot; ~ &quot;fl_greens&quot;,
                            Fractie == &quot;Groen&quot; ~ &quot;fl_greens&quot;,
                            Fractie == &quot;Groen!&quot; ~ &quot;fl_greens&quot;,
                            Fractie == &quot;PS&quot; ~ &quot;fr_soc_dem&quot;,
                            Fractie == &quot;PSB&quot; ~ &quot;fr_soc_dem&quot;,
                            Fractie == &quot;cdH&quot; ~ &quot;fr_chris_dem&quot;,
                            Fractie == &quot;PSC&quot; ~ &quot;fr_chris_dem&quot;,
                            Fractie == &quot;DéFI&quot; ~ &quot;fr_nat_dem&quot;,
                            Fractie == &quot;FDF&quot; ~ &quot;fr_nat_dem&quot;,
                            Fractie == &quot;FDF/PPW&quot; ~ &quot;fr_nat_dem&quot;,
                            #Fractie == &quot;Front National&quot; ~ &quot;fr_nat&quot;,
                            Fractie == &quot;MR&quot; ~ &quot;fr_lib_dem&quot;,
                            Fractie == &quot;PRL&quot; ~ &quot;fr_lib_dem&quot;,
                            Fractie == &quot;PRLW&quot; ~ &quot;fr_lib_dem&quot;,
                            Fractie == &quot;Ecolo&quot; ~ &quot;fr_greens&quot;,
                            Fractie == &quot;PTB-go!&quot; ~ &quot;fr_reds&quot;,
                            (Fractie == &quot;PVDA/PTB&quot; &amp; Taalgroep == &quot;Frans&quot;) ~ &quot;fr_reds&quot;,
                            (Fractie == &quot;KPB-PCB&quot; &amp; Taalgroep == &quot;Frans&quot;) ~ &quot;fr_reds&quot;,
                            #(Fractie == &quot;PVDA/PTB&quot; &amp; Taalgroep == &quot;Nederlands&quot;) ~ &quot;fl_reds&quot;,
                            #(Fractie == &quot;KPB-PCB&quot; &amp; Taalgroep == &quot;Nederlands&quot;) ~ &quot;fl_reds&quot;,
                            TRUE ~ &quot;others&quot;)) %&gt;% 
  mutate(family = paste(&quot; &quot;,family))</code></pre>
<pre><code>## Joining, by = &quot;start&quot;</code></pre>
<pre class="r"><code>to_add &lt;- data.frame(Fractie = &quot;Groen&quot;,
                 Taalgroep = &quot;Nederlands&quot;,
                 start = &quot;2003&quot;,
                 count = 0,
                 sum_seats= 150,
                 prc = 0,
                 family = &quot;  fl_greens&quot;)



d &lt;- rbind(as.data.frame(c),to_add)

# since the ptb has some sucess this year I need to add them so in the years
# where they had no seats they need to be included also

to_add &lt;- data.frame(Fractie = &quot;ptb&quot;,
                 Taalgroep = &quot;Frans&quot;,
                 start = c(&quot;1985&quot;,
                           &quot;1988&quot;,
                           &quot;1991&quot;,
                           &quot;1995&quot;,
                           &quot;1999&quot;,
                           &quot;2003&quot;,
                           &quot;2007&quot;,
                           &quot;2010&quot;), #this will luckily multiplate rows
                 count = 0,
                 sum_seats= 150,
                 prc = 0,
                 family = &quot;  fr_reds&quot;)

e &lt;- rbind(d,to_add)</code></pre>
<p>So now we are ready to use the data to plot the evolution. I’m adapting the code from this <a href="https://www.listendata.com/2019/05/create-animation-in-r-learn-with.html">post</a>. Thank you, Deepanshu Bhalla.</p>
<pre class="r"><code>fl_results &lt;- e %&gt;% 
  filter(Taalgroep == &quot;Nederlands&quot;) %&gt;% 
  arrange(start) %&gt;% 
  mutate(start = as.integer(start)) %&gt;% 
  filter(family != &quot;  others&quot;) # for now
 
# Set Theme
theme_set(theme_minimal())


p =  
  ggplot(data = fl_results, aes(x= factor(start), y=prc, group=family, colour=family)) +
  geom_line(size=1.4, show.legend = FALSE) +
  scale_color_manual(values=c(&quot;#ff9933&quot;, &quot;forestgreen&quot;, &quot;dodgerblue3&quot;, &quot;black&quot;,  &quot;orange4&quot;, &quot;red&quot;, &quot;red&quot;,&quot;orange4&quot;))+
  scale_x_discrete(position = &quot;top&quot;) +
  scale_y_continuous(labels = scales::percent_format(accuracy = 1)) +
  labs(title = &#39;Flemish parties. Parliament % of seats won&#39;, 
        x = NULL, y = NULL) +
  geom_text(aes(label=scales::percent(prc, accuracy = 1),
                vjust= -2), show.legend = FALSE) +
  theme(plot.title = element_text(hjust = 0.5)) +
  geom_dl(aes(label=family), method=&quot;last.points&quot;) +
  transition_reveal(start) +
  coord_cartesian(clip = &#39;off&#39;) + 
  ease_aes(&#39;cubic-in-out&#39;)

#p


animate(p, fps = 10, width = 800, height = 400, end_pause = 30)</code></pre>
<p><img src="/post/2019-06-06-belgian-may-election-results-are-published-on-wikipedia_files/figure-html/unnamed-chunk-7-1.gif" /><!-- --></p>
<p>Now for French speaking parties.</p>
<pre class="r"><code>fr_results &lt;- e %&gt;% 
  filter(Taalgroep == &quot;Frans&quot;) %&gt;% 
  arrange(start) %&gt;% 
  mutate(start = as.integer(start)) %&gt;% 
  filter(family != &quot;  others&quot;) # for now
 
# Set Theme
theme_set(theme_minimal())


p =  
  ggplot(data = fr_results, aes(x= factor(start), y=prc, group=family, colour=family)) +
  geom_line(size=1.4, show.legend = FALSE) +
  scale_color_manual(values=c(&quot;#ff9933&quot;, &quot;forestgreen&quot;, &quot;dodgerblue3&quot;, &quot;deeppink1&quot;,  &quot;red&quot;, &quot;pink&quot;, &quot;pink&quot;,&quot;orange4&quot;))+
  scale_x_discrete(position = &quot;top&quot;) +
  scale_y_continuous(labels = scales::percent_format(accuracy = 1)) +
  labs(title = &#39;Francophone parties. Parliament % of seats won&#39;, 
        x = NULL, y = NULL) +
  geom_text(aes(label=scales::percent(prc, accuracy = 1),
                vjust= -2), show.legend = FALSE) +
  theme(plot.title = element_text(hjust = 0.5)) +
  geom_dl(aes(label=family), method=&quot;last.points&quot;) +
  transition_reveal(start) +
  coord_cartesian(clip = &#39;off&#39;) + 
  ease_aes(&#39;cubic-in-out&#39;)

#p


animate(p, fps = 10, width = 800, height = 400, end_pause = 30)</code></pre>
<p><img src="/post/2019-06-06-belgian-may-election-results-are-published-on-wikipedia_files/figure-html/unnamed-chunk-8-1.gif" /><!-- --></p>

      
      <div class="related">

<h3>Similar articles:</h3>
<ul>
	
	<li><a href="/post/members-of-the-chamber-of-representatives-of-belgium-54th-legistlature/">members of the chamber of representatives of Belgium, 54th legistlature</a></li>
	
	<li><a href="/post/soon-in-a-sports-stadium-near-you/">soon, in a sports stadium near you!</a></li>
	
	<li><a href="/post/metallica-rules-the-world/">Metallica rules the world</a></li>
	
	<li><a href="/post/i-second-that-emotion/">I second that emotion</a></li>
	
	<li><a href="/post/happy-faces-in-a-bucket/">happy faces in a bucket</a></li>
	
</ul>
</div>
      
    </div>
    
  </div>
</section>


<section class="section">
  <div class="container">
    <aside><div id="disqus_thread"></div></aside>
  
    <div id="show_comments"><a id="load_comments" class="button is-link">Load comments</a></div>
  
    <script type="text/javascript">
      var disqus_shortname = 'bad-to-the-code';
      function disqus() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      }
  
      
      var hash = window.location.hash.substr(1);
      if ((hash.length > 8) && (hash.substring(0, 8) === "comment-")) {
        disqus();
        document.getElementById("show_comments").style.display = "none";
      } else {
        document.getElementById('load_comments').onclick = function() {
          disqus();
          document.getElementById("show_comments").style.display = "none";
        };
      }
  

    </script>
    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
  </div>
</section>


<section class="section">
  <div class="container has-text-centered">
    <p>&copy; <a href="https://github.com/madcap1090">William Bourgeois</a> 2019</p>
    
      <p>Powered by <a href="https://gohugo.io/">Hugo</a> &amp; <a href="https://github.com/ribice/kiss">Kiss</a>.</p>
    
  </div>
</section>


<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-137981534-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>


<script type="text/javascript">
  var _paq = _paq || [];
  _paq.push(['trackPageView']);
  _paq.push(['enableLinkTracking']);
  (function() {
    var u="\/\/matomo.example.com\/";
    _paq.push(['setTrackerUrl', u+'piwik.php']);
    _paq.push(['setSiteId', '1']);
    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
    g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);
  })();
</script>
<noscript>
  <img src="//matomo.example.com/piwik.php?idsite=1&amp;rec=1" style="border:0" alt="" />
</noscript>


</body>
</html>

